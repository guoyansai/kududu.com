(()=>{var o={52:function(o,i,s){var r=this&&this.__assign||function(){r=Object.assign||function(o){for(var i,s=1,r=arguments.length;s<r;s++){i=arguments[s];for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n))o[n]=i[n]}return o};return r.apply(this,arguments)};o.exports=function(o){var i;if(o===void 0){o={}}if((i=o.hostconfig.plugs)===null||i===void 0?void 0:i.mock){initMock(process.cwd())}o.mock.initMock=initMock;o.mock.wsWorkMock=wsWorkMock;o.mock.wsWorkListen=wsWorkListen;function initMock(i){var r,n;var t=s(896);o.mock=JSON.parse(t.readFileSync(i+o.hostconfig.plugs.mock.dir+"dirmock.json","utf-8"))||{};(r=o.mock.dirdb)===null||r===void 0?void 0:r.forEach((function(s){var r;try{r=JSON.parse(t.readFileSync(i+o.hostconfig.plugs.mock.dir+s,"utf-8"))||{}}catch(o){r={}}Object.assign(o.mock.db,r)}));(n=o.mock.dirfn)===null||n===void 0?void 0:n.forEach((function(s){var r;try{r=require(i+o.hostconfig.plugs.mock.dir+s)||{}}catch(o){r={}}Object.assign(o.mock.fn,r)}))}function wsWorkMock(i){var s,r,n,t,e,a;i.mockdata=i.reqdataisobj&&((r=(s=o.mock)===null||s===void 0?void 0:s.db)===null||r===void 0?void 0:r[(n=i.reqdata)===null||n===void 0?void 0:n.ty])||{};var c;if((t=i.mockdata)===null||t===void 0?void 0:t.wc){wsWorkListen(i)}else{c=i.reqdataisobj?JSON.stringify(getMockDb(i.reqdata||{},i.mockdata)):i.reqdata.toString();(a=(e=o.serversws[i.hostdir])===null||e===void 0?void 0:e.sendws)===null||a===void 0?void 0:a.call(e,c,0,i.ws)}}function getMockDb(i,s){var n;var t=null;if(s===null||s===void 0?void 0:s.fn){t=(n=o.mock.fn)===null||n===void 0?void 0:n[s.fn]}if(t){return t(i,s)}return r(r({},i),s||{})}function wsWorkListen(i){var s;var r=getKeyByData(i.reqdata);if((s=i.reqdata)===null||s===void 0?void 0:s.off){if(o.connectionsws[i.hostdir][i.ws.Userinfo.us].tasksws[r]){clearInterval(o.connectionsws[i.hostdir][i.ws.Userinfo.us].tasksws[r]);o.connectionsws[i.hostdir][i.ws.Userinfo.us].tasksws[r]=null}}else{if(!o.connectionsws[i.hostdir][i.ws.Userinfo.us].tasksws[r]){var n=getMockDb(i.reqdata,i.mockdata);o.connectionsws[i.hostdir][i.ws.Userinfo.us].tasksws[r]=setInterval((function(){var s,n;var t=getMockDb(i.reqdata,i.mockdata);t.tm=Date.now();var e=JSON.stringify(t);o.serversws[i.hostdir].sendws(e,t.pb||0,i.ws);if(!((s=o.connectionsws[i.hostdir][i.ws.Userinfo.us])===null||s===void 0?void 0:s.tasksws[r])){clearInterval((n=o.connectionsws[i.hostdir][i.ws.Userinfo.us])===null||n===void 0?void 0:n.tasksws[r])}}),(n===null||n===void 0?void 0:n.tc)||2e3)}}}function getKeyByData(o){return"_wstask_"+((o===null||o===void 0?void 0:o.id)||(o===null||o===void 0?void 0:o.ty)+"."+(o===null||o===void 0?void 0:o.ac))}}},896:o=>{"use strict";o.exports=require("fs")}};var i={};function __nccwpck_require__(s){var r=i[s];if(r!==undefined){return r.exports}var n=i[s]={exports:{}};var t=true;try{o[s].call(n.exports,n,n.exports,__nccwpck_require__);t=false}finally{if(t)delete i[s]}return n.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var s=__nccwpck_require__(52);module.exports=s})();