const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chunk-asai-C6QfKgYB.js","./chunk-asai-BcUlmSst.js","./entry-asai-C1GKnLJc.js","./chunk-asai-Dt9XmewB.js","../asset/css-asai-CbfgVn_P.css","./chunk-asai-BEbmHGt4.js","../asset/css-asai-CSksSbJg.css"])))=>i.map(i=>d[i]);
import{_ as a}from"./chunk-asai-Dt9XmewB.js";import{d as t,r as e,j as l,o as d,w as o,l as r,q as i,C as u,c as s,u as c,h as n,k as p,F as v,s as m,y as f,n as j,m as g,b as y,N as k,L as h,E as _,I as w,f as b}from"./chunk-asai-BcUlmSst.js";import{_ as x}from"./entry-asai-C1GKnLJc.js";import"./chunk-asai-BEbmHGt4.js";const $={class:"custom-input"},C={key:0,class:"custom-input-label"},O=x(t({__name:"TreeInput",props:{ujt:{},asaidata:{},formdata:{},formkey:{}},setup(a){const t=a,{$fn:n}=t.ujt;return(a,p)=>{var v,m,f,j,g,y,k,h;const _=e("CustomInputNumber"),w=e("el-input");return d(),l("div",$,[(null==(v=a.asaidata.rule[a.formkey])?void 0:v.hidelabel)?o("",!0):(d(),l("div",C,i((null==(j=null==(f=null==(m=a.asaidata)?void 0:m.rule)?void 0:f[a.formkey])?void 0:j.label)||(null==(y=null==(g=a.asaidata)?void 0:g.lang)?void 0:y[a.formkey])||a.formkey),1)),r("div",{class:"custom-input-input",style:u({width:(null==(k=a.asaidata.rule[a.formkey])?void 0:k.width)||"100%"})},["number"===a.asaidata.rule[a.formkey].type?(d(),s(_,{key:0,modelValue:t.formdata[a.formkey],"onUpdate:modelValue":p[0]||(p[0]=e=>t.formdata[a.formkey]=e),attrrules:a.asaidata.rule[a.formkey],ujt:a.ujt},null,8,["modelValue","attrrules","ujt"])):(d(),s(w,{key:1,modelValue:t.formdata[a.formkey],"onUpdate:modelValue":p[1]||(p[1]=e=>t.formdata[a.formkey]=e),placeholder:c(n).lg(null==(h=a.asaidata.rule[a.formkey])?void 0:h.tips)},null,8,["modelValue","placeholder"]))],4)])}}}),[["__scopeId","data-v-ae9aec44"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"})),T={class:"custom-input"},I={key:0,class:"custom-input-label"},A=x(t({__name:"TreeSelect",props:{ujt:{},asaidata:{},formdata:{},formkey:{}},setup(a){const t=a,{$fn:s}=t.ujt,v=n((()=>{var a,e;return(null==(a=t.asaidata.rule[t.formkey])?void 0:a.options)?(null==(e=t.asaidata.rule[t.formkey])?void 0:e.isitem)?t.asaidata.rule[t.formkey].options:t.asaidata.rule[t.formkey].options.map((a=>({label:s.lg(a.label),value:a.value}))):[]}));return(a,t)=>{var n,m,f,j,g,y,k,h,_;const w=e("el-select");return d(),l("div",T,[(null==(n=a.asaidata.rule[a.formkey])?void 0:n.hidelabel)?o("",!0):(d(),l("div",I,i((null==(j=null==(f=null==(m=a.asaidata)?void 0:m.rule)?void 0:f[a.formkey])?void 0:j.label)||(null==(y=null==(g=a.asaidata)?void 0:g.lang)?void 0:y[a.formkey])||a.formkey),1)),r("div",{class:"custom-input-input",style:u({width:(null==(k=a.asaidata.rule[a.formkey])?void 0:k.width)||"100%"})},[p(w,{modelValue:a.formdata[a.formkey],"onUpdate:modelValue":t[0]||(t[0]=t=>a.formdata[a.formkey]=t),placeholder:c(s).lg(null==(h=a.asaidata.rule[a.formkey])?void 0:h.tips),options:v.value,isItem:null==(_=a.asaidata.rule[a.formkey])?void 0:_.isitem,ujt:a.ujt},null,8,["modelValue","placeholder","options","isItem","ujt"])],4)])}}}),[["__scopeId","data-v-1615ac9e"]]),S=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"})),P={class:"custom-input"},V={key:0,class:"custom-input-label"},L=x(t({__name:"TreeSwitch",props:{ujt:{},asaidata:{},formdata:{},formkey:{}},setup(a){const t=a,{$fn:s}=t.ujt;return(a,t)=>{var s,c,n,v,m,f,j;const g=e("el-switch");return d(),l("div",P,[(null==(s=a.asaidata.rule[a.formkey])?void 0:s.hidelabel)?o("",!0):(d(),l("div",V,i((null==(v=null==(n=null==(c=a.asaidata)?void 0:c.rule)?void 0:n[a.formkey])?void 0:v.label)||(null==(f=null==(m=a.asaidata)?void 0:m.lang)?void 0:f[a.formkey])||a.formkey),1)),r("div",{class:"custom-input-input",style:u({width:(null==(j=a.asaidata.rule[a.formkey])?void 0:j.width)||"100%"})},[p(g,{modelValue:a.formdata[a.formkey],"onUpdate:modelValue":t[0]||(t[0]=t=>a.formdata[a.formkey]=t)},null,8,["modelValue"])],4)])}}}),[["__scopeId","data-v-66990302"]]),E=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),U=["onClick"],D=["onClick"],R=["onClick"],N=["onClick"],z=x(t({__name:"TreeFormLi",props:{ujt:{},asaidata:{},formdata:{}},setup(a){const t=a,{$dbwork:i}=t.ujt,n={TreeInput:O,TreeSelect:A,TreeSwitch:L};function y(a){i.prodata.paramcur={id:t.formdata.id,key:a}}function k(a,t){delete a[t],i.prodata.paramcur=null}return(a,t)=>{const h=e("AsSvg");return d(!0),l(v,null,m(Object.keys(a.formdata.va),(t=>{var e,_,w,b,x,$,C,O,W,T,I,A,S,P,V,L,E,z,J,K,B,F,M,q,G,H,Q,X;return d(),l(v,null,["object"!=typeof a.formdata.va[t]||Array.isArray(a.formdata.va[t])?(null==(_=null==(e=a.asaidata.rule)?void 0:e[t])?void 0:_.comp)?(d(),l("div",{key:1,class:"form-li",style:u({"--color":(null==($=null==(x=null==(b=null==(w=a.formdata)?void 0:w.va)?void 0:b.op)?void 0:x.co)?void 0:$[0])||(null==(W=null==(O=null==(C=a.asaidata)?void 0:C.rule)?void 0:O.defaultwg)?void 0:W.color),"--accolor":(null==(S=null==(A=null==(I=null==(T=a.formdata)?void 0:T.va)?void 0:I.op)?void 0:A.co)?void 0:S[1])||(null==(L=null==(V=null==(P=a.asaidata)?void 0:P.rule)?void 0:V.defaultwg)?void 0:L.accolor)}),onClick:f((a=>y(t)),["stop"])},[r("div",{class:j({"comp-form":!0,"is-active":(null==(z=null==(E=c(i).prodata)?void 0:E.paramcur)?void 0:z.id)===a.formdata.id&&(null==(K=null==(J=c(i).prodata)?void 0:J.paramcur)?void 0:K.key)===t})},[(d(),s(g(n[null==(F=null==(B=a.asaidata.rule)?void 0:B[t])?void 0:F.comp]),{key:t,ujt:a.ujt,asaidata:a.asaidata,formdata:a.formdata.va,formkey:t},null,8,["ujt","asaidata","formdata","formkey"]))],2),(null==(q=null==(M=c(i).prodata)?void 0:M.paramcur)?void 0:q.id)!==a.formdata.id||(null==(H=null==(G=c(i).prodata)?void 0:G.paramcur)?void 0:H.key)!==t||(null==(X=null==(Q=a.asaidata.rule)?void 0:Q[t])?void 0:X.nodel)?o("",!0):(d(),l("div",{key:0,class:"del-form",onClick:f((e=>k(a.formdata.va,t)),["stop"])},[p(h,{color:"var(--ch8)",height:"24px",src:"delete"})],8,N))],12,R)):o("",!0):(d(!0),l(v,{key:0},m(Object.keys(a.formdata.va[t]),(e=>{var m,_,w,b,x,$,C,O,W,T,I,A,S,P,V,L,E,R,N,z,J,K,B,F,M,q,G,H;return d(),l(v,null,[(null==(_=null==(m=a.asaidata.rule)?void 0:m[e])?void 0:_.comp)?(d(),l("div",{key:0,class:"form-li",style:u({"--color":(null==($=null==(x=null==(b=null==(w=a.formdata)?void 0:w.va)?void 0:b.op)?void 0:x.co)?void 0:$[0])||(null==(W=null==(O=null==(C=a.asaidata)?void 0:C.rule)?void 0:O.defaultwg)?void 0:W.color),"--accolor":(null==(S=null==(A=null==(I=null==(T=a.formdata)?void 0:T.va)?void 0:I.op)?void 0:A.co)?void 0:S[1])||(null==(L=null==(V=null==(P=a.asaidata)?void 0:P.rule)?void 0:V.defaultwg)?void 0:L.accolor)}),onClick:f((a=>y(e)),["stop"])},[r("div",{class:j({"comp-form":!0,"is-active":(null==(R=null==(E=c(i).prodata)?void 0:E.paramcur)?void 0:R.id)===a.formdata.id&&(null==(z=null==(N=c(i).prodata)?void 0:N.paramcur)?void 0:z.key)===e})},[(d(),s(g(n[null==(K=null==(J=a.asaidata.rule)?void 0:J[e])?void 0:K.comp]),{key:e,ujt:a.ujt,asaidata:a.asaidata,formdata:a.formdata.va[t],formkey:e},null,8,["ujt","asaidata","formdata","formkey"]))],2),(null==(F=null==(B=c(i).prodata)?void 0:B.paramcur)?void 0:F.id)!==a.formdata.id||(null==(q=null==(M=c(i).prodata)?void 0:M.paramcur)?void 0:q.key)!==e||(null==(H=null==(G=a.asaidata.rule)?void 0:G[e])?void 0:H.nodel)?o("",!0):(d(),l("div",{key:0,class:"del-form",onClick:f((l=>k(a.formdata.va[t],e)),["stop"])},[p(h,{color:"var(--ch8)",height:"24px",src:"delete"})],8,D))],12,U)):o("",!0)],64)})),256))],64)})),256)}}}),[["__scopeId","data-v-2c03d1e3"]]),J={key:0,class:"params-object"},K={class:"params-object-tit"},B=x(t({__name:"ParamsObject",props:{asaidata:{},formdata:{},formkey:{},curWidgets:{},ujt:{}},setup(a){const t=a,e=n((()=>{let a=!1,e=Object.keys(t.formdata);for(let l of Object.keys(t.curWidgets))if(!e.includes(l)){a=!0;break}return a}));return(a,t)=>{var u,s;return e.value?(d(),l("div",J,[r("div",K,i((null==(u=a.asaidata)?void 0:u.lang)&&(null==(s=a.asaidata)?void 0:s.lang[a.formkey])||a.formkey),1),p(q,{ujt:a.ujt,asaidata:a.asaidata,formdata:a.formdata,curWidgets:a.curWidgets},null,8,["ujt","asaidata","formdata","curWidgets"])])):o("",!0)}}}),[["__scopeId","data-v-17af2302"]]),F={class:"params-li"},M=["onClick"],q=x(t({__name:"ParamsLi",props:{asaidata:{},formdata:{},curWidgets:{},ujt:{}},setup(a){const t=a;return(a,e)=>(d(),l("div",F,[(d(!0),l(v,null,m(a.curWidgets,((e,r)=>{var u,c,n,p,m;return d(),l(v,null,[(null==(c=null==(u=a.asaidata.rule)?void 0:u[r])?void 0:c.default)?o("",!0):(d(),l(v,{key:0},["object"!=typeof e||Array.isArray(e)?void 0===(null==(n=a.formdata)?void 0:n[r])?(d(),l("div",{key:1,class:"params-li-item",onClick:l=>function(a,e,l){t.formdata[a]=l}(r,a.formdata,e)},i((null==(p=a.asaidata)?void 0:p.lang)&&(null==(m=a.asaidata)?void 0:m.lang[r])||r),9,M)):o("",!0):(d(),s(B,{key:0,asaidata:a.asaidata,formdata:a.formdata[r],curWidgets:e,formkey:r,ujt:a.ujt},null,8,["asaidata","formdata","curWidgets","formkey","ujt"]))],64))],64)})),256))]))}}),[["__scopeId","data-v-081954eb"]]),G={class:"add-params"},H={class:"add-params-li"},Q=x(t({__name:"AddParams",props:{asaidata:{},formdata:{},curWidgets:{},ujt:{}},setup:a=>(a,t)=>(d(),l("div",G,[r("div",H,[p(q,{ujt:a.ujt,asaidata:a.asaidata,formdata:a.formdata,curWidgets:a.curWidgets},null,8,["ujt","asaidata","formdata","curWidgets"])])]))}),[["__scopeId","data-v-b90652dc"]]),X=a=>{const{$dbwork:t,$fn:e}=a;function l(a){return a.map((a=>{let t={...a};return t.id="wd"+e.As.Uuid("tw"),a.ch&&a.ch.length>0&&(t.ch=l(a.ch)),t}))}function d(a){let e=t.prodata.itemcur.index-1;"down"===a&&(e=t.prodata.itemcur.index+1),o(t.prodata.itemcur.treedata[e],e,t.prodata.itemcur.treedata)}function o(a,e,l){t.prodata.prcur=null,t.prodata.itemcur={...a,index:e,treedata:l}}return{delWidgets:function(){var a;(null==(a=t.prodata)?void 0:a.itemcur)&&(t.prodata.itemcur.treedata.splice(t.prodata.itemcur.index,1),t.prodata.itemcur=null)},clipOut:function(){var a;(null==(a=t.prodata)?void 0:a.itemcur)&&(t.prodata.copycur=null,t.prodata.clipoutcur=t.prodata.itemcur)},stick:function(){var a,e,d,o,r,i;if((null==(a=t.prodata)?void 0:a.itemcur)||(null==(e=t.prodata)?void 0:e.prcur))if(t.prodata.copycur){let a=JSON.parse(JSON.stringify(l([t.prodata.copycur])));(null==(d=t.prodata)?void 0:d.itemcur)?t.prodata.itemcur.treedata.splice(t.prodata.itemcur.index+1,0,a[0]):(null==(o=t.prodata)?void 0:o.prcur)&&t.prodata.prcur.treedata.splice(1,0,a[0])}else if(t.prodata.clipoutcur){let a={...t.prodata.clipoutcur};delete a.index,delete a.treedata,(null==(r=t.prodata)?void 0:r.itemcur)?t.prodata.itemcur.treedata.splice(t.prodata.itemcur.index+1,0,a):(null==(i=t.prodata)?void 0:i.prcur)&&t.prodata.prcur.treedata.splice(1,0,a),t.prodata.clipoutcur.treedata.splice(t.prodata.clipoutcur.index,1),t.prodata.clipoutcur=null}},copy:function(){var a;if(null==(a=t.prodata)?void 0:a.itemcur){t.prodata.clipoutcur=null;let a={...t.prodata.itemcur};delete a.index,delete a.treedata,t.prodata.copycur=a}},explain:function(){var a;(null==(a=t.prodata)?void 0:a.itemcur)&&(t.prodata.itemcur.ex=t.prodata.itemcur.ex?0:1,t.prodata.itemcur.treedata[t.prodata.itemcur.index].ex=t.prodata.itemcur.ex)},moveUp:function(){var a;(null==(a=t.prodata)?void 0:a.itemcur)&&t.prodata.itemcur.index>0&&([t.prodata.itemcur.treedata[t.prodata.itemcur.index],t.prodata.itemcur.treedata[t.prodata.itemcur.index-1]]=[t.prodata.itemcur.treedata[t.prodata.itemcur.index-1],t.prodata.itemcur.treedata[t.prodata.itemcur.index]],d("up"))},moveDown:function(){var a;(null==(a=t.prodata)?void 0:a.itemcur)&&t.prodata.itemcur.index<t.prodata.itemcur.treedata.length-1&&([t.prodata.itemcur.treedata[t.prodata.itemcur.index],t.prodata.itemcur.treedata[t.prodata.itemcur.index+1]]=[t.prodata.itemcur.treedata[t.prodata.itemcur.index+1],t.prodata.itemcur.treedata[t.prodata.itemcur.index]],d("down"))},handleCur:o}},Y={class:"tree-widget-content"},Z={class:"tree-widget-icon"},aa={key:0,class:"tree-widget-script"},ta={key:1,class:"tree-widget-text"},ea={class:"tree-widget-form"},la={key:2,class:"tree-widget-more"},da=x(t({__name:"TreeWidgets",props:{data:{},index:{},level:{},asaidata:{},treedata:{},ujt:{}},setup(a){const t=a,{$dbwork:s}=t.ujt,{handleCur:v}=X(t.ujt),m=y({filterKeys:["op","p1","p2"]}),g=n((()=>{if(s.widgets[t.data.ty])return s.widgets[t.data.ty];for(let a of Object.keys(s.widgets))if("object"==typeof s.widgets[a]&&s.widgets[a][t.data.ty])return s.widgets[a][t.data.ty]}));function h(){t.data.ot.sc=t.data.ot.sc?0:1}function _(a){let t=[];if(a)for(let e of Object.keys(a))m.filterKeys.includes(e)||("object"==typeof a[e]?t.push(...Object.keys(a[e])):t.push(e));return t}return(a,n)=>{var m,y,w,b,x,$,C,O,W,T,I,A,S,P;const V=e("AsSvg"),L=e("el-popover");return d(),l("div",{class:j({"tree-widget":!0,"is-cur":(null==(m=c(s).prodata.itemcur)?void 0:m.id)===a.data.id,"is-clipout":(null==(y=c(s).prodata.clipoutcur)?void 0:y.id)===a.data.id,"is-explain":a.data.ex}),style:u({"--color":(null==(x=null==(b=null==(w=a.data)?void 0:w.va)?void 0:b.op)?void 0:x.co[0])||(null==(O=null==(C=null==($=a.asaidata)?void 0:$.rule)?void 0:C.defaultwg)?void 0:O.color),"--accolor":(null==(I=null==(T=null==(W=a.data)?void 0:W.va)?void 0:T.op)?void 0:I.co[1])||(null==(P=null==(S=null==(A=a.asaidata)?void 0:A.rule)?void 0:S.defaultwg)?void 0:P.accolor)}),onClick:n[0]||(n[0]=t=>c(v)(a.data,a.index,a.treedata))},[n[3]||(n[3]=r("div",{class:"tree-widget-index"},[r("div",{class:"index"})],-1)),r("div",Y,[n[2]||(n[2]=r("div",{class:"tree-widget-line"},null,-1)),r("div",{class:"tree-widget-sc",style:u(`padding-left:${50*a.level}px`)},[a.data.ch&&a.data.ch.length?(d(),l("div",{key:0,class:"sc-icon",onClick:f(h,["stop"])},i(a.data.ot.sc?"－":"＋"),1)):o("",!0)],4),r("div",Z,[p(V,{src:"movL",height:"35px",color:"var(--ibg)",ujt:a.ujt},null,8,["ujt"])]),"scriptLua"===a.data.ty?(d(),l("div",aa)):(d(),l("div",ta,i(a.data.ty),1)),r("div",ea,[p(z,{asaidata:a.asaidata,formdata:a.data,ujt:a.ujt},null,8,["asaidata","formdata","ujt"])]),a.data.ex||JSON.stringify(_(t.data.va).sort())===JSON.stringify(_(g.value).sort())?o("",!0):(d(),l("div",la,[p(L,{placement:"bottom",width:"500px",ujt:a.ujt},{reference:k((()=>n[1]||(n[1]=[r("div",{class:"more"},"...",-1)]))),default:k((()=>[p(Q,{ujt:a.ujt,asaidata:a.asaidata,formdata:a.data.va,curWidgets:g.value},null,8,["ujt","asaidata","formdata","curWidgets"])])),_:1},8,["ujt"])]))])],6)}}}),[["__scopeId","data-v-0e992863"]]),oa={class:"tree-widget-content"},ra={class:"tree-widget-tip"},ia=x(t({__name:"PlaRow",props:{asaidata:{},treedata:{},id:{},level:{},op:{},ujt:{}},setup(a){const t=a,{$fn:e,$dbwork:o}=t.ujt;function s(){o.prodata.itemcur=null,o.prodata.prcur={id:t.id,treedata:t.treedata}}return(a,t)=>{var n,p,v,m,f,g,y,k,h;return d(),l("div",{class:j({"pla-row":!0,"is-cur":(null==(n=c(o).prodata.prcur)?void 0:n.id)===a.id}),style:u({"--color":(null==(p=a.op)?void 0:p.co[0])||(null==(f=null==(m=null==(v=a.asaidata)?void 0:v.rule)?void 0:m.defaultwg)?void 0:f.color),"--accolor":(null==(g=a.op)?void 0:g.co[1])||(null==(h=null==(k=null==(y=a.asaidata)?void 0:y.rule)?void 0:k.defaultwg)?void 0:h.accolor)}),onClick:s},[t[1]||(t[1]=r("div",{class:"tree-widget-index"},[r("div",{class:"index"})],-1)),r("div",oa,[t[0]||(t[0]=r("div",{class:"tree-widget-line"},null,-1)),r("div",{class:"tree-widget-sc",style:u(`padding-left:${50*a.level-18}px`)},null,4),r("div",ra,i(c(e).lg("cocontrol.tree.ctips")),1)])],6)}}}),[["__scopeId","data-v-2be68ebf"]]),ua=t({__name:"TreeTable",props:{asaidata:{},treedata:{},level:{},ujt:{}},setup(a){const t=a,{$dbwork:e,$fn:r}=t.ujt;return(a,t)=>(d(!0),l(v,null,m(a.treedata,((t,e)=>(d(),l(v,{key:t.ty+"_"+e},[p(da,{ujt:a.ujt,data:t,level:a.level,id:c(r).As.Uuid("tw"),index:e,asaidata:a.asaidata,treedata:a.treedata},null,8,["ujt","data","level","id","index","asaidata","treedata"]),t.ch&&t.ot.sc?(d(),l(v,{key:0},[p(ua,{ujt:a.ujt,asaidata:a.asaidata,treedata:t.ch,level:a.level+1},null,8,["ujt","asaidata","treedata","level"]),t.ch.length?o("",!0):(d(),s(ia,{key:0,ujt:a.ujt,level:a.level+1,id:"wd"+c(r).As.Uuid("tw"),treedata:t.ch,asaidata:a.asaidata,op:t.va.op},null,8,["ujt","level","id","treedata","asaidata","op"]))],64)):o("",!0)],64)))),128))}}),sa={class:"tree-operate"},ca=x(t({__name:"TreeOperate",props:{ujt:{}},setup(a){const t=a,{$global:o,$fn:i,$dbwork:u}=t.ujt,{delWidgets:s,clipOut:v,stick:m,copy:f,moveDown:g,moveUp:y,explain:k}=X(t.ujt),{treeToLuaByProject:_}=i.useTreeToLua(t.ujt),{getProjectById:w}=i.useProjectRead(t.ujt),{saveProjectData:b}=i.useProjectSave(t.ujt);const x=n((()=>{var a,t,e,l;return!u.prodata.copycur&&!u.prodata.clipoutcur||!!u.prodata.clipoutcur&&(null==(t=null==(a=u.prodata)?void 0:a.itemcur)?void 0:t.id)===(null==(l=null==(e=u.prodata)?void 0:e.clipoutcur)?void 0:l.id)})),$=n((()=>{var a;return!(null==(a=u.prodata)?void 0:a.itemcur)})),C=n((()=>{var a;return!(null==(a=u.prodata)?void 0:a.itemcur)||!(u.prodata.itemcur.index>0)})),O=n((()=>{var a;return!(null==(a=u.prodata)?void 0:a.itemcur)||!(u.prodata.itemcur.index<u.prodata.itemcur.treedata.length-1)}));return(a,t)=>{var n,W;const T=e("AsSvg");return d(),l("div",sa,[r("div",{class:j({"tree-operate-li":!0,"is-disabled":$.value}),onClick:t[0]||(t[0]=(...a)=>c(s)&&c(s)(...a))},[p(T,{color:$.value?"var(--ccfd)":"var(--ch8)",height:"30px",src:"delete",ujt:a.ujt},null,8,["color","ujt"])],2),r("div",{class:j({"tree-operate-li":!0,"is-disabled":$.value}),onClick:t[1]||(t[1]=(...a)=>c(v)&&c(v)(...a))},[p(T,{color:$.value?"var(--ccfd)":"var(--ch8)",height:"30px",src:"clipout",ujt:a.ujt},null,8,["color","ujt"])],2),r("div",{class:j({"tree-operate-li":!0,"is-disabled":x.value}),onClick:t[2]||(t[2]=(...a)=>c(m)&&c(m)(...a))},[p(T,{color:x.value?"var(--ccfd)":"var(--ch8)",height:"30px",src:"stick",ujt:a.ujt},null,8,["color","ujt"])],2),r("div",{class:j({"tree-operate-li":!0,"is-disabled":$.value}),onClick:t[3]||(t[3]=(...a)=>c(f)&&c(f)(...a))},[p(T,{color:$.value?"var(--ccfd)":"var(--ch8)",height:"30px",src:"copy",ujt:a.ujt},null,8,["color","ujt"])],2),r("div",{class:j({"tree-operate-li":!0,"is-disabled":$.value}),onClick:t[4]||(t[4]=(...a)=>c(k)&&c(k)(...a))},[p(T,{color:$.value?"var(--ccfd)":"var(--ch8)",height:"30px",src:(null==(W=null==(n=c(u).prodata)?void 0:n.itemcur)?void 0:W.ex)?"isexplain":"explain",ujt:a.ujt},null,8,["color","src","ujt"])],2),r("div",{class:j({"tree-operate-li":!0,"is-disabled":C.value}),onClick:t[5]||(t[5]=(...a)=>c(y)&&c(y)(...a))},[p(T,{color:C.value?"var(--ccfd)":"var(--ch8)",height:"30px",src:"arrow",class:"arrow-up",ujt:a.ujt},null,8,["color","ujt"])],2),r("div",{class:j({"tree-operate-li":!0,"is-disabled":O.value}),onClick:t[6]||(t[6]=(...a)=>c(g)&&c(g)(...a))},[p(T,{color:O.value?"var(--ccfd)":"var(--ch8)",height:"30px",src:"arrow",class:"arrow-down",ujt:a.ujt},null,8,["color","ujt"])],2),r("div",{class:j({"tree-operate-li":!0}),onClick:t[7]||(t[7]=a=>{var t,e;return function(a=""){w(a,u.prodata.codety).then((t=>{b(_(t),u.prodata.codety).then((t=>{o.msg.fn({type:"ok",con:"恭喜您，转义成功！切换至lua脚本编程查看。"}),h((()=>{i.sethash(o.location.hasharr[0]+"/robotcode/lua/?id="+a),i.As.localReload()}))}))}))}(null==(e=null==(t=c(u))?void 0:t.prodata)?void 0:e.codepr)})},[p(T,{color:"var(--ch8)",height:"30px",src:"project",ujt:a.ujt},null,8,["ujt"])])])}}}),[["__scopeId","data-v-c2808ec2"]]),na=x(t({__name:"AddWidgets",props:{asaidata:{},ujt:{}},setup(a){const t=a,{$fn:o,$global:r}=t.ujt;function u(){r.pop.addWidgets.stat=1,r.pop.addWidgets.tit=o.lg("cocontrol.widgets.addwidgets"),r.pop.addWidgets.width="auto",r.pop.addWidgets.full=1,r.pop.addWidgets.noresize=1}return(a,t)=>{const r=e("AsSvg");return d(),l("div",{class:"add-widgets-btn",onClick:u},[p(r,{color:"var(--cp4)",height:"24px",src:"add",ujt:a.ujt},null,8,["ujt"]),_("  "+i(c(o).lg("cocontrol.widgets.addwidgets")),1)])}}}),[["__scopeId","data-v-f4ce1f90"]]),pa={class:"widgets-list"},va={key:0,class:"widgets-content"},ma={class:"widgets-ul"},fa=["onClick"],ja={class:"widgets-tit"},ga={class:"widgets-info"},ya={class:"info"},ka={key:1,class:"menu-ul"},ha=["onClick"],_a={class:"menu-item"},wa=x(t({__name:"AddWidgetsList",props:{asaidata:{},ujt:{}},setup(a){const t=a,{$fn:s,$global:n,$db:f,$dbwork:j}=t.ujt,g=y({filterKeys:["op","p1","p2"],widgets:null});function k(){g.widgets=null}function h(a){var t;return!(null==(t=null==a?void 0:a.op)?void 0:t.spe)||2===a.op.spe}return(a,y)=>{const w=e("AsSvg");return d(),l("div",pa,[g.widgets?(d(),l("div",va,[r("div",ma,[(d(!0),l(v,null,m(g.widgets.item,((e,m)=>{var y,k,_,b,x,$,C,O,W,T;return d(),l(v,{key:m},["op"!==m&&h(e)?(d(),l("div",{key:0,class:"widgets",onClick:a=>function(a){var e,l,d,o,r,i,u,c,p,v,m;let y={};for(let s of Object.keys(a[1]))if(!g.filterKeys.includes(s))if("object"!=typeof a[1][s]||Array.isArray(a[1][s]))(null==(i=null==(r=null==(o=t.asaidata)?void 0:o.rule)?void 0:r[s])?void 0:i.default)&&(y[s]=a[1][s]);else for(let o of Object.keys(a[1][s]))y[s]||(y[s]={}),(null==(d=null==(l=null==(e=t.asaidata)?void 0:e.rule)?void 0:l[o])?void 0:d.default)&&(y[s][o]=a[1][s][o]);let k={id:"wd"+s.As.Uuid("tw"),ty:a[0],va:y,ex:0,ot:{sc:1}};(null==(u=a[1])?void 0:u.op)&&(k.va.op=a[1].op,(null==(p=null==(c=a[1])?void 0:c.op)?void 0:p.ch)&&(k.ch=[])),(null==(v=j.prodata)?void 0:v.itemcur)?j.prodata.itemcur.treedata.push(k):(null==(m=j.prodata)?void 0:m.prcur)?(j.prodata.prcur.treedata.push(k),j.prodata.prcur=null):f.prodata.taskcur.push(k),n.pop.addWidgets.stat=0}([m,e])},[r("div",{class:"widgets-svg",style:u({"background-color":(null==(k=null==(y=null==e?void 0:e.op)?void 0:y.co)?void 0:k[1])||(null==(x=null==(b=null==(_=a.asaidata)?void 0:_.rule)?void 0:b.defaultwg)?void 0:x.accolor)})},[p(w,{color:(null==(C=null==($=null==e?void 0:e.op)?void 0:$.co)?void 0:C[0])||(null==(T=null==(W=null==(O=a.asaidata)?void 0:O.rule)?void 0:W.defaultwg)?void 0:T.color),height:"var(--fs3)",src:"common/robotsetting"},null,8,["color"])],4),r("div",ja,i(c(s).lg(`cowidgets.${m}`)?c(s).lg(`cowidgets.${m}`)[0]:m),1)],8,fa)):o("",!0)],64)})),128))]),r("div",ga,[r("div",ya,i(g.widgets.key),1),r("div",{class:"back",onClick:k},[p(w,{color:"var(--ibg)",height:"var(--fs2)",src:"common/darrowright"})])])])):(d(),l("div",ka,[(d(!0),l(v,null,m(c(j).widgets,((t,e)=>{var s,c,n,p,m;return d(),l(v,{key:e},[h(t)?(d(),l("div",{key:0,class:"menu-li",onClick:a=>function(a,t){g.widgets={item:a,key:t}}(t,e),style:u({"--color":(null==(c=null==(s=null==t?void 0:t.op)?void 0:s.co)?void 0:c[0])||(null==(m=null==(p=null==(n=a.asaidata)?void 0:n.rule)?void 0:p.defaultwg)?void 0:m.color)})},[r("div",_a,[y[0]||(y[0]=r("div",{class:"square"},null,-1)),_(" "+i(e),1)])],12,ha)):o("",!0)],64)})),128))]))])}}}),[["__scopeId","data-v-19762bdd"]]),ba={class:"tree-index"},xa={class:"tree-table"},$a={class:"tree-footer"},Ca=x(t({__name:"TreeIndex",props:{ujt:{}},setup(t){const o=t,{$fn:i,$global:u,$db:s}=o.ujt,{cmTreeData:v}=(a=>{const{$db:t,$dbwork:e}=a.ujt,l=n((()=>t.prodata.taskcur));return{cmTreeFlatList:n((()=>l.value)),cmTreeData:l}})(o),{initWidgets:m}=i.useWidgetsInit(o.ujt);m();const f=y({}),j=Object.assign({"./_comps/TreeInput.vue":()=>a((()=>Promise.resolve().then((()=>W))),void 0,import.meta.url),"./_comps/TreeSelect.vue":()=>a((()=>Promise.resolve().then((()=>S))),void 0,import.meta.url),"./_comps/TreeSwitch.vue":()=>a((()=>Promise.resolve().then((()=>E))),void 0,import.meta.url),"./_comps/object.vue":()=>a((()=>import("./chunk-asai-C6QfKgYB.js")),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)});function g(a){const t=a.match(/([^\\/]+)(?=\.vue$)/);return t?t[1]:null}for(let a in j)j[g(a)||a]=j[a],delete j[a];return f.comp=j,f.lang=n((()=>u.lang.coattr)),f.langtips=n((()=>u.lang.coattrtips)),i.initmodel("cocontrol/rule/rulewidgets.json").then((a=>{let t={};Object.keys(a).forEach((e=>{var l;if("dir"!==e)for(let d of Object.keys(a[e]))if("template"!==d){let o={};(null==(l=a[e])?void 0:l.template)&&a[e].template[a[e][d].tmp]&&(o=a[e].template[a[e][d].tmp]),t[d]={...a[e][d],...o}}})),f.rule=t})),(a,t)=>{const o=e("PopBox");return d(),l("div",ba,[r("div",xa,[p(ua,{ujt:a.ujt,asaidata:f,treedata:c(v),level:0},null,8,["ujt","asaidata","treedata"])]),r("div",$a,[p(na,{ujt:a.ujt,asaidata:f},null,8,["ujt","asaidata"]),p(ca,{ujt:a.ujt},null,8,["ujt"])]),p(o,{ujt:a.ujt,id:"addWidgets"},{default:k((()=>[p(wa,{ujt:a.ujt,asaidata:f},null,8,["ujt","asaidata"])])),_:1},8,["ujt"])])}}}),[["__scopeId","data-v-f6034c48"]]),Oa=t({__name:"default",props:{ujt:{}},setup(a){const t=a,{$db:e,$dbwork:l}=t.ujt;e.prodata.config.open.pty="tree";const o=w((()=>e.prodata.taskcur),((a,t)=>{2===l.prodata.saved.taskcur?l.prodata.saved.taskcur=1:0!==l.prodata.saved.taskcur&&(l.prodata.saved.taskcur=0)}),{deep:!0});return b((()=>{o&&o()})),(a,t)=>(d(),s(Ca,{ujt:a.ujt},null,8,["ujt"]))}});export{Oa as default};
