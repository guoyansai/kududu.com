const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chunk-asai-Cjo0GKSh.js","./chunk-asai-DwBdIxdo.js","./chunk-asai-BcUlmSst.js","./entry-asai-C1GKnLJc.js","./chunk-asai-Dt9XmewB.js","../asset/css-asai-CbfgVn_P.css","./chunk-asai-BEbmHGt4.js","../asset/css-asai-CSksSbJg.css","../asset/css-asai-DNX0ihdd.css","../asset/css-asai-Bdrl8Uns.css","./chunk-asai-BubHrfav.js","../asset/css-asai-BmtLYIG0.css","./chunk-asai-D0_XDRLp.js","../asset/css-asai-DtrdvWDY.css","./chunk-asai-DK-oFr9K.js","./chunk-asai-DrOZ0O-8.js","../asset/css-asai-BydaXe6n.css","./chunk-asai-DAhChu6Z.js","../asset/css-asai-BB-gVm68.css","./chunk-asai-CSku-2hY.js","../asset/css-asai-y_c1wWjk.css","./chunk-asai-CDIW1-IM.js","../asset/css-asai-CHylEVkf.css","./chunk-asai-Y45BOY_e.js","../asset/css-asai-Yrv59uo4.css","./chunk-asai-BY5swUiA.js","../asset/css-asai-BWGvYFv0.css","./chunk-asai-BDZG5l5j.js","./chunk-asai-fztcMW1L.js","./chunk-asai-ly7RqWch.js","../asset/css-asai-CCQIxEAh.css","../asset/css-asai-2lnfOf1r.css"])))=>i.map(i=>d[i]);
import{a as e,d as a,e as t,h as o,r as i,c as s,o as n,N as l,l as d,j as c,w as r,F as v,s as p,n as u,q as m,u as w,k as g,E as _,L as f,b,O as h,m as j,y,C as k,z as E,p as O}from"./chunk-asai-BcUlmSst.js";import{_ as x}from"./chunk-asai-Dt9XmewB.js";import{_ as T}from"./entry-asai-C1GKnLJc.js";const P={CoordToolPayload:e((()=>x((()=>import("./chunk-asai-Cjo0GKSh.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url))),ErrorInfo:e((()=>x((()=>import("./chunk-asai-BubHrfav.js")),__vite__mapDeps([10,1,2,3,4,5,6,7,8,11]),import.meta.url))),FullLog:e((()=>x((()=>import("./chunk-asai-D0_XDRLp.js")),__vite__mapDeps([12,1,2,3,4,5,6,7,8,13]),import.meta.url))),GlobalVar:e((()=>x((()=>import("./chunk-asai-DK-oFr9K.js")),__vite__mapDeps([14,1,2,3,4,5,6,7,8,15,16]),import.meta.url))),Logo:e((()=>x((()=>import("./chunk-asai-DAhChu6Z.js")),__vite__mapDeps([17,1,2,3,4,5,6,7,8,18]),import.meta.url))),ProjectLoad:e((()=>x((()=>import("./chunk-asai-CSku-2hY.js")),__vite__mapDeps([19,1,2,3,4,5,6,7,8,20]),import.meta.url))),ProjectVar:e((()=>x((()=>import("./chunk-asai-CDIW1-IM.js")),__vite__mapDeps([21,1,2,3,4,5,6,7,8,15,22]),import.meta.url))),RealTimeLog:e((()=>x((()=>import("./chunk-asai-Y45BOY_e.js")),__vite__mapDeps([23,1,2,3,4,5,6,7,8,24]),import.meta.url))),RunStatus:e((()=>x((()=>import("./chunk-asai-BY5swUiA.js")),__vite__mapDeps([25,1,2,3,4,5,6,7,8,26]),import.meta.url))),Simulate:e((()=>x((()=>import("./chunk-asai-BDZG5l5j.js")),__vite__mapDeps([27,2,1,3,4,5,6,7,8,28,29,30,31]),import.meta.url)))},I={class:"add-widget-wrapper"},S={class:"widget-list-box"},B=["onClick"],C={class:"main"},A={class:"name"},L={class:"desc"},R={key:0,class:"empty"},$={class:"btn-box"},D=T(a({__name:"AddWidget",props:{ujt:{},existWidgets:{}},emits:["selected"],setup(e,{expose:a,emit:b}){const h=e,j=b,{$db:y,$fn:k,$dbwork:E,$global:O,$model:x}=h.ujt,T=t(null),P=o((()=>{const e=h.existWidgets.map((e=>e.component));return x.cocontrol.channelcoview.widgets.filter((a=>!e.includes(a.component)))})),D=()=>{T.value=null,O.pop.popcoviewaddwidget.stat=0},V=()=>{if(!T.value)return void O.msg.fn({type:"err",con:k.lg("coview.addWidget.selectOne")});const e=k.As.Uuid("cw"),a=JSON.parse(JSON.stringify(T.value));j("selected",e),f((()=>{h.existWidgets.push({id:e,...a})})),T.value=null,O.pop.popcoviewaddwidget.stat=0};return a({showPopBox:()=>{O.pop.popcoviewaddwidget.stat=1,O.pop.popcoviewaddwidget.tit=k.lg("coview.main.addWidget"),O.pop.popcoviewaddwidget.width="800px"}}),(e,a)=>{const t=i("el-button"),o=i("PopBox");return n(),s(o,{ujt:e.ujt,id:"popcoviewaddwidget"},{default:l((()=>[d("div",I,[d("div",S,[(n(!0),c(v,null,p(P.value,(e=>{var t;return n(),c("div",{onClick:a=>(e=>{T.value=e})(e),class:u({"widget-item-box":!0,"is-selected":(null==(t=T.value)?void 0:t.component)==e.component})},[d("div",C,[d("div",A,m(w(k).lg(e.name)),1),d("div",L,m(w(k).lg(e.desc)),1)]),a[0]||(a[0]=d("div",{class:"flag"},"âˆš",-1))],10,B)})),256)),0==P.value.length?(n(),c("div",R,m(w(k).lg("coview.addWidget.allAdded")),1)):r("",!0)]),d("div",$,[g(t,{onClick:D,plain:"",type:"info"},{default:l((()=>[_(m(w(k).lg("coview.common.cancel")),1)])),_:1}),g(t,{onClick:V,type:"primary"},{default:l((()=>[_(m(w(k).lg("coview.common.confirm")),1)])),_:1})])])])),_:1},8,["ujt"])}}}),[["__scopeId","data-v-a71081e0"]]),V=Symbol("elRootKey"),W=Symbol("removeWidgetKey"),N={key:0,class:"start-edit-box"},J={class:"drag-box"},z={class:"btn-box"},M=T(a({__name:"Demo",props:{ujt:{}},setup(e){const a=e,{$db:o,$fn:i,$dbwork:l,$global:u,$ws:_}=a.ujt;l.coviewdata=l.coviewdata||b({isEditing:!1,selectedId:void 0,handleBeforeCancel:{},handleBeforeSave:{}});const f=t(),x=t(),T=b({x:1200,y:10}),I=t({});let S={},B=!1;const C=t(!1);let A=0,L=0;const R=()=>{l.coviewdata.isEditing||B||(B=!0,A=setTimeout((()=>{clearTimeout(A),A=0,C.value=!0,L=setTimeout((()=>{clearTimeout(L),L=0,C.value=!1,S=JSON.parse(JSON.stringify(I.value)),l.coviewdata.isEditing=!0}),2e3)}),1e3))},$=()=>{B=!1,C.value=!1,A&&(clearTimeout(A),A=0),L&&(clearTimeout(L),L=0)},M=()=>{x.value.showPopBox()},F=e=>{l.coviewdata.selectedId=e},G=async()=>{let e=!0;Object.keys(l.coviewdata.handleBeforeSave).length>0&&await Promise.all(Object.keys(l.coviewdata.handleBeforeSave).map((e=>l.coviewdata.handleBeforeSave[e]()))).then((()=>{})).catch((()=>{u.msg.fn({type:"err",con:i.lg("coview.common.saveError")}),e=!1})),e&&i.api.webserver.apiPost(`/api/asaijson/manage/update/?path=/webdata/cocontrol/robotview/coview-${u.user.info.us}.json`,I.value).then((e=>{909==e.code?(l.coviewdata.isEditing=!1,l.coviewdata.selectedId=void 0,l.coviewdata.handleBeforeCancel={},l.coviewdata.handleBeforeSave={},u.msg.fn({type:"ok",con:i.lg("coview.common.saveOk")})):u.msg.fn({type:"err",con:i.lg("coview.common.saveError")})})).catch((()=>{u.msg.fn({type:"err",con:i.lg("coview.common.saveError")})}))},K=async()=>{let e=!0;Object.keys(l.coviewdata.handleBeforeCancel).length>0&&await Promise.all(Object.keys(l.coviewdata.handleBeforeCancel).map((e=>l.coviewdata.handleBeforeCancel[e]()))).then((()=>{})).catch((()=>{u.msg.fn({type:"err",con:i.lg("coview.common.restoreDataError")}),e=!1})),e&&(l.coviewdata.isEditing=!1,l.coviewdata.selectedId=void 0,l.coviewdata.handleBeforeCancel={},l.coviewdata.handleBeforeSave={},I.value=S)};return O(V,f),O(W,(e=>{const a=I.value.widgets.findIndex((a=>a.id==e));I.value.widgets.splice(a,1)})),i.api.webserver.apiGet(`/api/asaijson/manage/select/?path=/webdata/cocontrol/robotview/coview-${u.user.info.us}.json`).then((e=>{909==e.code&&(I.value=JSON.parse(e.data))})).catch((()=>{i.api.webserver.apiGet("/api/asaijson/manage/select/?path=/webdata/cocontrol/robotview/coview.json").then((e=>{909==e.code?I.value=JSON.parse(e.data):u.msg.fn({type:"err",con:i.lg("coview.common.getError")})}))})),(e,a)=>{const t=h("dragzoom");return n(),c("div",{ref_key:"elRoot",ref:f,class:"demo"},[d("div",{class:"widgets-wrapper",onMousedown:y(R,["prevent"]),onTouchstart:y(R,["prevent"]),onMouseup:y($,["prevent"]),onTouchend:y($,["prevent"])},[(n(!0),c(v,null,p(I.value.widgets,(a=>(n(),s(j(w(P)[a.component]),{key:a.id,ujt:e.ujt,data:a},null,8,["ujt","data"])))),128))],32),C.value?(n(),c("div",N,[d("span",null,m(w(i).lg("coview.main.goWidgetManage")),1)])):r("",!0),w(l).coviewdata.isEditing?(n(),c("div",{key:1,class:"manage-widget-box",style:k({transform:`translate(${T.x}px, ${T.y}px)`})},[E(d("div",J,null,512),[[t,{ujt:e.ujt,pos:T}]]),d("div",z,[d("div",{class:"btn btn-private btn-add",onClick:M},m(w(i).lg("coview.main.addWidget")),1),d("div",{class:"btn btn-default btn-cancel",onClick:K},m(w(i).lg("coview.common.cancel")),1),d("div",{class:"btn btn-default btn-save",onClick:G},m(w(i).lg("coview.common.confirm")),1)])],4)):r("",!0),g(D,{ref_key:"refAddWidget",ref:x,ujt:e.ujt,"exist-widgets":I.value.widgets,onSelected:F},null,8,["ujt","exist-widgets"])],512)}}}),[["__scopeId","data-v-0e81359d"]]),F={class:"as-view-area"},G=T(a({__name:"default",props:{ujt:{}},setup:e=>(e,a)=>(n(),c("div",F,[g(M,{ujt:e.ujt},null,8,["ujt"])]))}),[["__scopeId","data-v-eab60cbd"]]),K=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{K as _,V as e,W as r};
