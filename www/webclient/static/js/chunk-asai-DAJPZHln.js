import{d as e,r as t,j as l,o as a,l as o,q as n,u,k as d,E as r,F as c,s,n as i,v as m,y as p,N as v,c as f,e as b,b as g,I as j,w as T,J as h,m as _}from"./chunk-asai-BcUlmSst.js";import{_ as w}from"./entry-asai-C1GKnLJc.js";import"./chunk-asai-Dt9XmewB.js";import"./chunk-asai-BEbmHGt4.js";const V={class:"as-header"},y={class:"as-header_title"},C=w(e({__name:"TempHeader",props:{ujt:{}},emits:["saveTemp"],setup(e,{emit:c}){const s=e,{$global:i,$fn:m}=s.ujt,p=c;function v(){p("saveTemp")}return(e,c)=>{const s=t("AsSvg");return a(),l("div",V,[o("div",y,n(u(m).lg("cocontrol.weld.weldmd")),1),o("div",{class:"as-header_btn",onClick:v},[d(s,{src:"projectsave",height:"18px",color:"var(--ibg)",ujt:e.ujt},null,8,["ujt"]),r(" "+n(u(m).lg("cocommon.save")),1)])])}}}),[["__scopeId","data-v-deb288f5"]]),k={class:"temp-menu"},$={class:"temp-menu_header"},x={class:"header-title"},D={class:"temp-menu_content"},S=["onClick"],W={class:"menu-li-num"},A={class:"menu-li-text"},I=w(e({__name:"TempMenu",props:{ujt:{},menuData:{},curTemp:{}},emits:["addTemp","setTemp"],setup(e,{emit:r}){const m=e,p=r,{$global:v,$fn:f}=m.ujt;function b(){p("addTemp")}return(e,r)=>{const m=t("AsSvg");return a(),l("div",k,[o("div",$,[r[0]||(r[0]=o("div",{class:"header-line"},null,-1)),o("div",x,n(u(f).lg("cocontrol.weld.weldart")),1),o("div",{class:"header-icon",onClick:b},[d(m,{color:"var(--ibg)",height:"16px",src:"add",ujt:e.ujt},null,8,["ujt"])])]),o("div",D,[(a(!0),l(c,null,s(e.menuData,((t,u)=>{var d;return a(),l("div",{class:i({"menu-li":!0,"is-active":t.id===(null==(d=e.curTemp)?void 0:d.id)}),key:"menu_"+t.id,onClick:e=>function(e,t){p("setTemp",e,t)}(t,u)},[o("div",W,n(t.id)+".",1),o("div",A,n(t.tmpname),1)],10,S)})),128))])])}}}),[["__scopeId","data-v-a9ec46ce"]]),U={class:"as-index"},M={class:"as-index_content"},P=w(e({__name:"TempIndex",props:{ujt:{},plugsdata:{},curTemp:{}},emits:["addTemp","setTemp"],setup(e,{emit:t}){const n=e,u=t,{$global:r}=n.ujt;function c(){u("addTemp")}function s(e,t){u("setTemp",e,t)}return(e,t)=>(a(),l("div",U,[d(I,{ujt:e.ujt,menuData:e.plugsdata,curTemp:e.curTemp,onSetTemp:s,onAddTemp:c},null,8,["ujt","menuData","curTemp"]),o("div",M,[m(e.$slots,"default",{},void 0,!0)])]))}}),[["__scopeId","data-v-88c4ef88"]]),R={class:"temp-single"},N={class:"temp-single_header"},L={class:"temp-single_content"},E=w(e({__name:"TempSingle",props:{ujt:{},curTemp:{}},emits:["plugsDel","copyTemp","send"],setup(e,{emit:i}){const m=e,b=i,{$global:g,$fn:j}=m.ujt;function T(){b("plugsDel")}function h(){b("copyTemp")}function _(){b("send")}return(e,i)=>{const m=t("el-button"),b=t("el-input"),g=t("el-form-item"),w=t("el-select"),V=t("CustomInputNumber"),y=t("el-form");return a(),l("div",R,[o("div",N,[d(m,{type:"danger",onClick:p(T,["stop"])},{default:v((()=>[r(n(u(j).lg("cocontrol.weld.btndel")),1)])),_:1}),d(m,{onClick:h},{default:v((()=>[r(n(u(j).lg("cocontrol.weld.copyconfirm")),1)])),_:1}),d(m,{type:"primary",onClick:_},{default:v((()=>[r(n(u(j).lg("cocontrol.weld.sendparams")),1)])),_:1})]),o("div",L,[d(y,{"label-width":"120px"},{default:v((()=>[d(g,{label:u(j).lg("cocontrol.weld.tempname")+"："},{default:v((()=>[d(b,{modelValue:e.curTemp.tmpname,"onUpdate:modelValue":i[0]||(i[0]=t=>e.curTemp.tmpname=t)},null,8,["modelValue"])])),_:1},8,["label"]),(a(!0),l(c,null,s(e.curTemp.params,((t,l)=>(a(),f(g,{key:"params_"+l,label:t.label[1]+"："},{default:v((()=>{return[t.data?(a(),f(w,{key:0,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,ujt:e.ujt,options:(l=t.data,l.map((e=>({label:e.label[1]||e.label[0],value:e.value}))))},null,8,["modelValue","onUpdate:modelValue","ujt","options"])):(a(),f(V,{key:1,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,attrrules:t.rule,ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","attrrules","ujt"]))];var l})),_:2},1032,["label"])))),128))])),_:1})])])}}}),[["__scopeId","data-v-584a4cc0"]]),F={class:"temp-multi"},q={class:"temp-multi_header"},z={class:"temp-multi_content"},B={class:"table-operate"},H={class:"content-table"},J={class:"table-th-li"},O={class:"table-td-li table-td-index"},G={class:"number"},K=["onClick"],Q=w(e({__name:"TempMulti",props:{ujt:{},curTemp:{}},emits:["plugsDel","clearWeldTable","addWeldSeam","delSeam"],setup(e,{emit:m}){const g=e,j=m,{$global:T,$fn:h}=g.ujt,_=b(),w=b();function V(){j("plugsDel")}function y(){j("clearWeldTable")}function C(){j("addWeldSeam")}function k(){var e;_.value&&(_.value.scrollTop=null==(e=w.value)?void 0:e.scrollTop)}return(e,m)=>{const b=t("el-button"),g=t("el-input"),T=t("el-form-item"),$=t("el-form"),x=t("AsSvg"),D=t("AsIcon"),S=t("el-select"),W=t("CustomInputNumber");return a(),l("div",F,[o("div",q,[d(b,{type:"danger",onClick:V},{default:v((()=>[r(n(u(h).lg("cocontrol.weld.btndel")),1)])),_:1})]),o("div",z,[d($,{"label-width":"120px"},{default:v((()=>[d(T,{label:u(h).lg("cocontrol.weld.tempname")+"："},{default:v((()=>[d(g,{modelValue:e.curTemp.tmpname,"onUpdate:modelValue":m[0]||(m[0]=t=>e.curTemp.tmpname=t)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),o("div",B,[o("div",{class:"attr-btn attr-btn-clear",onClick:p(y,["stop"])},[d(x,{color:"var(--ccf)",height:"16px",src:"delete",ujt:e.ujt},null,8,["ujt"]),r(" "+n(u(h).lg("cocontrol.weld.clearweld")),1)]),o("div",{class:"attr-btn attr-btn-add",onClick:C},[d(x,{color:"var(--ibg)",height:"16px",src:"common/addblock"}),r(" "+n(u(h).lg("cocontrol.weld.addweld")),1)])]),o("div",H,[o("div",{class:"table-th",ref_key:"scrollLeft",ref:_},[o("div",J,n(u(h).lg("cocontrol.weld.beadnumber")),1),(a(!0),l(c,null,s(e.curTemp.params.th,((e,t)=>(a(),l("div",{class:"table-th-li",key:"th_"+t},n(e.label[1]),1)))),128))],512),o("div",{class:"content-table-td",ref_key:"scrollRight",ref:w,onScroll:k},[(a(!0),l(c,null,s(e.curTemp.params.td,((t,r)=>(a(),l("div",{class:i({"table-td":!0,"table-td-bg":r%2==0}),key:"row_"+r},[o("div",O,[o("div",G,n(r+1),1),o("div",{class:"delete",onClick:p((e=>{j("delSeam",r)}),["stop"])},[d(D,{title:u(h).lg("cocommon.delete"),color:"var(--cz4)",height:"16px",src:"delete"},null,8,["title"])],8,K)]),(a(!0),l(c,null,s(t,((t,o)=>{return a(),l("div",{class:"table-td-li",key:"td_"+o},[t.data?(a(),f(S,{key:0,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,ujt:e.ujt,options:(n=t.data,n.map((e=>({label:e.label[1],value:e.value}))))},null,8,["modelValue","onUpdate:modelValue","ujt","options"])):(a(),f(W,{key:1,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,attrrules:t.rule,ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","attrrules","ujt"]))]);var n})),128))],2)))),128))],544)])])])}}}),[["__scopeId","data-v-3d483154"]]),X={class:"as-template"},Y={class:"template-menu"},Z={class:"template-content"},ee=w(e({__name:"WeldTemp",props:{datatype:{},tempid:{},ujt:{}},setup(e){const r=e,{$global:c,$fn:s}=r.ujt;let m=g({active:"single",curTemp:null,first:!0,index:0,tableData:[]});function p(e){m.first=!1,m.active=e}function b(){let e="welder/setSingleWeld";"multi"===m.active&&(e="welder/setMultiWeld"),s.ws.cocontrol.wsApi({ty:e,db:m.tableData}).then((e=>{c.msg.fn({type:"ok",con:s.lg("coview.common.saveOk")})}))}function h(){let e="welder/addSingleWeldTemplate";"multi"===m.active&&(e="welder/addMultiWeldTemplate"),s.ws.cocontrol.wsApi({ty:e,db:""}).then((e=>{m.tableData.length?e.db.id=m.tableData[m.tableData.length-1].id+1:e.db.id=1,m.tableData.push(e.db)}))}function _(e,t){m.index=t,m.curTemp=e}function w(){m.curTemp=null,m.tableData.splice(m.index,1)}function V(){m.curTemp.params.td=[]}function y(){s.ws.cocontrol.wsApi({ty:"welder/addMultiWeldSeam",db:""}).then((e=>{m.curTemp.params.td.push(e.db)}))}function k(e){m.curTemp.params.td.splice(e,1)}function $(){let e={...m.curTemp};e.id=m.tableData[m.tableData.length-1].id+1,m.tableData.push(e),m.curTemp=e}function x(){s.ws.cocontrol.wsApi({ty:"welder/sendTemplateParams",db:m.curTemp}).then((e=>{c.msg.fn({type:"ok",con:s.lg("cocommon.sendparamssuccess")})}))}return r.datatype&&(m.active=r.datatype),j((()=>m.active),(e=>{m.curTemp=null;let t="welder/getSingleWeldTemplateList";"multi"===e&&(t="welder/getMultiWeldTemplateList"),s.ws.cocontrol.wsApi({ty:t,db:""}).then((e=>{m.tableData=e.db||[],void 0!==r.tempid&&m.first&&m.tableData.forEach(((e,t)=>{e.id===r.tempid&&_(e,t)}))}))}),{immediate:!0}),(e,r)=>{const c=t("el-empty");return a(),l("div",X,[o("div",Y,[o("div",{class:i({"template-menu-item":!0,"is-active":"single"===u(m).active}),onClick:r[0]||(r[0]=e=>p("single"))},n(u(s).lg("cocontrol.weld.singleweld")),3),o("div",{class:i({"template-menu-item":!0,"is-active":"multi"===u(m).active}),onClick:r[1]||(r[1]=e=>p("multi"))},n(u(s).lg("cocontrol.weld.multiweld")),3)]),o("div",Z,[d(C,{ujt:e.ujt,onSaveTemp:b},null,8,["ujt"]),d(P,{ujt:e.ujt,curTemp:u(m).curTemp,plugsdata:u(m).tableData,onSetTemp:_,onAddTemp:h},{default:v((()=>[u(m).curTemp&&"single"===u(m).active?(a(),f(E,{key:0,ujt:e.ujt,curTemp:u(m).curTemp,onPlugsDel:w,onCopyTemp:$,onSend:x},null,8,["ujt","curTemp"])):T("",!0),u(m).curTemp&&"multi"===u(m).active?(a(),f(Q,{key:1,ujt:e.ujt,curTemp:u(m).curTemp,onPlugsDel:w,onClearWeldTable:V,onAddWeldSeam:y,onDelSeam:k},null,8,["ujt","curTemp"])):(a(),f(c,{key:2,description:u(s).lg("cocontrol.weld.noart")},null,8,["description"]))])),_:1},8,["ujt","curTemp","plugsdata"])])])}}}),[["__scopeId","data-v-4da82afb"]]),te={class:"as-regulation"},le={class:"form-header"},ae={class:"form-text"},oe={class:"form-text"},ne={class:"form-btn"},ue=["onClick"],de=["onClick"],re=w(e({__name:"Regulation",props:{ujt:{}},setup(e){const r=e,{$fn:i,$global:m}=r.ujt;let p=g({table:[{type:"current",value:"Current"},{type:"voltage",value:"Voltage"}],form:{incCurrent:1,priCurrent:0,actCurrent:0,adjCurrent:0,incVoltage:1,priVoltage:0,actVoltage:0,adjVoltage:0},timer:null,current:"电流",voltage:"电压"});function f(e){i.ws.cocontrol.wsApi({ty:"welder/getRtParamAdjust",db:""}).then((t=>{t.db&&(p.form.actCurrent=t.db.actCurrent||0,p.form.actVoltage=t.db.actVoltage||0,e&&(p.form.adjCurrent=t.db.adjCurrent||0,p.form.adjVoltage=t.db.adjVoltage||0,p.form.priCurrent=t.db.adjCurrent||0,p.form.priVoltage=t.db.adjVoltage||0,p.form.incCurrent=t.db.incCurrent||1,p.form.incVoltage=t.db.incVoltage||1))}))}function b(e){let t=p.form[`inc${e}`]||1;p.form[`adj${e}`]=function(e,t){let l,a,o;try{l=e.toString().split(".")[1].length}catch(n){l=0}try{a=t.toString().split(".")[1].length}catch(n){a=0}return o=Math.pow(10,Math.max(l,a)),(e*o+t*o)/o}(p.form[`adj${e}`],t)}function j(e){let t=p.form[`inc${e}`]||1;p.form[`adj${e}`]=function(e,t){let l,a,o,n;try{l=e.toString().split(".")[1].length}catch(u){l=0}try{a=t.toString().split(".")[1].length}catch(u){a=0}return o=Math.pow(10,Math.max(l,a)),n=l>=a?l:a,((e*o-t*o)/o).toFixed(n)}(p.form[`adj${e}`],t),"Current"===e&&p.form[`adj${e}`]<0&&(p.form[`adj${e}`]=0)}function T(){""!==p.form.adjCurrent&&""!==p.form.adjVoltage?(p.form.priCurrent=p.form.adjCurrent,p.form.priVoltage=p.form.adjVoltage,i.ws.cocontrol.wsApi({ty:"welder/sendparams",db:{adjCurrent:p.form.adjCurrent,adjVoltage:p.form.adjVoltage,incCurrent:p.form.incCurrent||1,incVoltage:p.form.incVoltage||1}}).then((e=>{m.msg.fn({type:"ok",con:i.lg("cocommon.sendparamssuccess")})}))):m.msg.fn({type:"err",con:"请输入调整值"})}return f(!0),p.timer=setInterval((()=>{f(!1)}),1e3),h((()=>{p.timer&&clearInterval(p.timer),p.timer=null})),(e,r)=>{const m=t("el-form-item"),f=t("CustomInputNumber"),g=t("el-form");return a(),l("div",te,[(a(!0),l(c,null,s(u(p).table,((t,r)=>(a(),l("div",{class:"as-regulation-form",key:"table"+r},[o("div",le,n(u(p)[t.type]),1),d(g,{labelWidth:"80px"},{default:v((()=>[d(m,{label:"原始值"},{default:v((()=>[o("div",ae,n(u(p).form[`pri${t.value}`]),1)])),_:2},1024),d(m,{label:"实际值"},{default:v((()=>[o("div",oe,n(u(p).form[`act${t.value}`]),1)])),_:2},1024),d(m,{label:"增量"},{default:v((()=>[d(f,{modelValue:u(p).form[`inc${t.value}`],"onUpdate:modelValue":e=>u(p).form[`inc${t.value}`]=e,attrrules:{rexin:"[^0-9.]",step:1,min:0,hideunit:!0,hidereplace:!0,hidebtn:!1},ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","ujt"])])),_:2},1024),d(m,{label:"调整值"},{default:v((()=>[d(f,{modelValue:u(p).form[`adj${t.value}`],"onUpdate:modelValue":e=>u(p).form[`adj${t.value}`]=e,attrrules:"Current"===t.value?{rexin:"[^0-9.]",step:1,min:0,hideunit:!0,hidereplace:!0,hidebtn:!0}:{hideunit:!0,hidereplace:!0,hidebtn:!0},ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","attrrules","ujt"])])),_:2},1024)])),_:2},1024),o("div",ne,[o("div",{class:"btn",onClick:e=>b(t.value)},"+",8,ue),o("div",{class:"btn",onClick:e=>j(t.value)},"-",8,de)])])))),128)),o("div",{class:"send-btn",onClick:T},n(u(i).lg("cocontrol.weld.sendparams")),1)])}}}),[["__scopeId","data-v-6ef0e090"]]),ce={class:"as-nav"},se=["onClick"],ie=e({__name:"default",props:{ujt:{}},setup(e){const u=e,{$fn:r,$global:i}=u.ujt,m={WeldTemp:ee,Regulation:re},p=g({data:[{label:"工艺模板",comp:"WeldTemp"},{label:"实时调节",comp:"Regulation"}],comp:""});return(e,u)=>{const b=t("PopBox");return a(),l(c,null,[o("div",ce,[(a(!0),l(c,null,s(p.data,(e=>(a(),l("div",{class:"as-nav-card",key:e.value,onClick:t=>function(e){e.comp?(p.comp=e.comp,i.pop.robotplugcomp.tit=e.label,i.pop.robotplugcomp.width="auto",i.pop.robotplugcomp.stat=1):r.sethash(e.value)}(e)},n(e.label),9,se)))),128))]),d(b,{ujt:e.ujt,id:"robotplugcomp"},{default:v((()=>[(a(),f(_(m[p.comp]),{ujt:e.ujt},null,8,["ujt"]))])),_:1},8,["ujt"])],64)}}});export{ie as default};
