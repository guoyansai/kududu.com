import{d as a,e,j as l,o as t,l as i,q as o,u as s,n,y as r}from"./chunk-asai-B97Ffvgy.js";import{a as u}from"./entry-asai-DWgTTEmF.js";const d={key:0},f=["src","alt","title"],v=["title"],p=["title"],m=["accept"],c=u(a({__name:"asaiupbase64",props:{ujt:{},asaidata:{},formdata:{},formkey:{}},setup(a){const u=a,{$fn:c,$global:y}=u.ujt,k=e(null),g=e(null),h=e("+"),b=async a=>{if(k.value.value){if(g.value=a.target.files[0],k.value.value="",!g.value)return void(h.value="请选择一个文件");const e=new FileReader;e.onload=async()=>{const a=e.result.split(",")[1];try{c.api.webserver.apiPost("/api/asaiupload/manage/upbase64/?path="+c.As.getName(g.value.name),a,{headers:{"Content-Type":"application/json"}}).then((a=>{h.value="",u.formdata[u.formkey]=a.data}))}catch(l){h.value="上传失败: "+l.message}},e.readAsDataURL(g.value)}};function j(){k.value.click()}return(a,e)=>{var g,_,C,w,A,F,I,R,U,$,q,x;return t(),l("label",null,[i("span",null,o((null==(g=u.asaidata)?void 0:g.lang)&&(null==(_=u.asaidata)?void 0:_.lang[a.formkey])||a.formkey)+": ",1),i("div",{class:"as-upload-image",onClick:r(j,["prevent"])},[u.formdata[a.formkey]?(t(),l("div",d,[(null==(F=null==(A=null==(w=null==(C=a.asaidata)?void 0:C.rule)?void 0:w[a.formkey])?void 0:A.accept)?void 0:F.startsWith("image/"))?(t(),l("img",{key:0,src:s(c).As.getUrlByCfg(s(y).link.api.webserver)+"/"+u.formdata[a.formkey],alt:u.formdata[a.formkey],title:u.formdata[a.formkey]},null,8,f)):(t(),l("div",{key:1,class:"as-upload-tit",title:u.formdata[a.formkey]},o(u.formdata[a.formkey]),9,v))])):(t(),l("div",{key:1,class:n("+"===h.value?"":"as-upload-tit"),title:h.value},o(h.value),11,p))]),(null==(U=null==(R=null==(I=a.asaidata)?void 0:I.rule)?void 0:R[a.formkey])?void 0:U.accept)?(t(),l("input",{key:0,accept:null==(x=null==(q=null==($=a.asaidata)?void 0:$.rule)?void 0:q[a.formkey])?void 0:x.accept,ref_key:"rfInputFile",ref:k,type:"file",hidden:"",onChange:b},null,40,m)):(t(),l("input",{key:1,ref_key:"rfInputFile",ref:k,type:"file",hidden:"",onChange:b},null,544))])}}}),[["__scopeId","data-v-5c4ea69b"]]);export{c as default};
