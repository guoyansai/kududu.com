import{d as e,e as t,b as o,r as a,j as l,o as n,k as r,N as s,E as c,q as i,u as p,c as u}from"./chunk-asai-BcUlmSst.js";import{_ as d}from"./entry-asai-C1GKnLJc.js";import"./chunk-asai-Dt9XmewB.js";import"./chunk-asai-BEbmHGt4.js";const m={class:"robot-log"},b=d(e({__name:"RobotLog",props:{ujt:{}},setup(e){const u=e,{$fn:d}=u.ujt,b=t([]),g=o({columns:[{label:"文件名称",prop:"fileName",align:"center"},{label:"创建时间",prop:"createTime",scopedSlots:"createTime",align:"center"},{label:"文件大小",prop:"size",align:"center",scopedSlots:"size"},{label:"操作",align:"center",scopedSlots:"operate"}]});d.ws.cocontrol.wsApi({ty:"common/getLogFileList",db:""}).then((e=>{b.value=e.db.sort(f("createTime",!1))}));const j=(e,t)=>{if(0===e)return"0 B";let o=t,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(o))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][a]},f=(e,t=!0)=>(o,a)=>{let l=o[e],n=a[e];return t?l-n:n-l},h=(e,t)=>{const o=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(o);let l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)};return(e,t)=>{const o=a("AsSvg"),u=a("el-button"),f=a("el-table");return n(),l("div",m,[r(f,{data:b.value,columns:g.columns,stripe:""},{createTime:s((({row:e,index:t})=>{return[c(i((o=e.createTime,o&&"number"==typeof o?new Date(1e3*o).toLocaleString().replace(new RegExp("/","g"),"-"):"")),1)];var o})),size:s((({row:e,index:t})=>[c(i(j(e.size,2)),1)])),operate:s((({row:t,index:a})=>[r(u,{class:"var-btn",type:"primary",onClick:e=>(e=>{d.ws.cocontrol.wsApi({ty:"common/getLogFileContent",db:e.fileName}).then((t=>{h(t.db,e.fileName)}))})(t)},{default:s((()=>[r(o,{color:"var(--ibg)",height:"16px",src:"common/download",ujt:e.ujt},null,8,["ujt"]),c(" "+i(p(d).lg("cocommon.downloadlog")),1)])),_:2},1032,["onClick"])])),_:1},8,["data","columns"])])}}}),[["__scopeId","data-v-82cf993d"]]),g=e({__name:"default",props:{ujt:{}},setup:e=>(e,t)=>(n(),u(b,{ujt:e.ujt},null,8,["ujt"]))});export{g as default};
