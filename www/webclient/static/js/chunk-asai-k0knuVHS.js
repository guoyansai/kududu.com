import{d as a,e,j as l,o as t,l as i,q as u,u as r,n as o,y as n}from"./chunk-asai-B97Ffvgy.js";import{a as s}from"./entry-asai-DWgTTEmF.js";const d={key:0},f=["src","alt","title"],v=["title"],m=["title"],p=["accept"],y=s(a({__name:"asaiupbin",props:{ujt:{},asaidata:{},formdata:{},formkey:{}},setup(a){const s=a,{$fn:y,$global:c}=s.ujt,k=e(null),g=e(null),h=e("+"),b=async a=>{if(k.value.value){if(g.value=a.target.files[0],k.value.value="",!g.value)return void(h.value="请选择一个文件");try{y.api.webserver.apiUpload("/api/asaiupload/manage/upbinary/?path="+y.As.getName(g.value.name),g.value).then((a=>{h.value="",s.formdata[s.formkey]=a.data}))}catch(e){h.value="上传失败: "+e.message}}};function _(){k.value.click()}return(a,e)=>{var g,j,C,I,w,A,F,U,$,q,x,B;return t(),l("label",null,[i("span",null,u((null==(g=s.asaidata)?void 0:g.lang)&&(null==(j=s.asaidata)?void 0:j.lang[a.formkey])||a.formkey)+": ",1),i("div",{class:"as-upload-image",onClick:n(_,["prevent"])},[s.formdata[a.formkey]?(t(),l("div",d,[(null==(A=null==(w=null==(I=null==(C=a.asaidata)?void 0:C.rule)?void 0:I[a.formkey])?void 0:w.accept)?void 0:A.startsWith("image/"))?(t(),l("img",{key:0,src:r(y).As.getUrlByCfg(r(c).link.api.webserver)+"/"+s.formdata[a.formkey],alt:s.formdata[a.formkey],title:s.formdata[a.formkey]},null,8,f)):(t(),l("div",{key:1,class:"as-upload-tit",title:s.formdata[a.formkey]},u(s.formdata[a.formkey]),9,v))])):(t(),l("div",{key:1,class:o("+"===h.value?"":"as-upload-tit"),title:h.value},u(h.value),11,m))]),(null==($=null==(U=null==(F=a.asaidata)?void 0:F.rule)?void 0:U[a.formkey])?void 0:$.accept)?(t(),l("input",{key:0,accept:null==(B=null==(x=null==(q=a.asaidata)?void 0:q.rule)?void 0:x[a.formkey])?void 0:B.accept,ref_key:"rfInputFile",ref:k,type:"file",hidden:"",onChange:b},null,40,p)):(t(),l("input",{key:1,ref_key:"rfInputFile",ref:k,type:"file",hidden:"",onChange:b},null,544))])}}}),[["__scopeId","data-v-00f4a8f4"]]);export{y as default};
