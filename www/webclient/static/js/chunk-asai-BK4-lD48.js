import{d as e,b as a,h as t,r as l,j as s,o,l as d,k as n,u as i,F as u,s as r,w as c,E as p,n as m,q as b,N as v,y as h,V as y}from"./chunk-asai-BcUlmSst.js";import{_ as V}from"./entry-asai-C1GKnLJc.js";import"./chunk-asai-Dt9XmewB.js";import"./chunk-asai-BEbmHGt4.js";const g={class:"as-agreement"},f={class:"as-agreement_header"},j={class:"form-input"},k={class:"form-input"},w={class:"as-agreement_table"},_=["onClick"],D={key:0,class:"table-content"},U={class:"table_header"},C={class:"table_header_form"},x={class:"form-input"},N={class:"form-input"},I={class:"table-content_th"},A={class:"table-operate"},R={class:"table-td"},T={class:"table-td"},G={class:"table-td"},S={class:"table-td"},$={class:"table-td"},q={class:"table-operate"},B={class:"as-agreement_footer"},E=V(e({__name:"RoSetagreement",props:{attrsai:{},attrdata:{},attrrules:{},keyName:{},attrtype:{},ujt:{},asaicomp:{}},setup(e){const V=e,{$fn:E,$global:F}=V.ujt;let O=a({table:[{type:"output",show:!0},{type:"input",show:!0}],tableData:{},input:"机器人输入",output:"机器人输出"});E.ws.cocontrol.wsApi({ty:"welder/getGeneralRegisters",db:""}).then((e=>{O.tableData=e.db||{}}));const z=t((()=>V.attrrules[V.keyName].data.porterType.map((e=>({label:e.label[0],value:e.value})))));function H(){E.ws.cocontrol.wsApi({ty:"welder/addGeneralRegisters",db:O.tableData}).then((e=>{F.msg.fn({type:"ok",con:E.lg("coview.common.saveOk")})}))}return(e,a)=>{const t=l("el-select"),V=l("AsSvg"),F=l("el-button"),J=l("el-input"),K=l("CustomInputNumber");return o(),s("div",g,[d("div",f,[a[2]||(a[2]=d("div",{class:"form-label"}," 协议类型： ",-1)),d("div",j,[n(t,{modelValue:i(O).tableData.type,"onUpdate:modelValue":a[0]||(a[0]=e=>i(O).tableData.type=e),options:e.attrrules[e.keyName].data.agreementType,isItem:"",ujt:e.ujt},null,8,["modelValue","options","ujt"])]),a[3]||(a[3]=d("div",{class:"form-label"}," 波特率： ",-1)),d("div",k,[n(t,{modelValue:i(O).tableData.porter,"onUpdate:modelValue":a[1]||(a[1]=e=>i(O).tableData.porter=e),options:z.value,ujt:e.ujt},null,8,["modelValue","options","ujt"])])]),d("div",w,[(o(!0),s(u,null,r(i(O).table,((l,g)=>(o(),s("div",{class:"agreement-table",key:"form"+g},[d("div",{class:"table-header",onClick:e=>l.show=!l.show},[n(V,{class:m({"arrow-right":!0,"arrow-right-show":l.show}),src:"arrowright",color:"var(--ccf)",height:"var(--fs2)"},null,8,["class"]),p(" "+b(i(O)[l.type])+" ",1),n(F,{type:"primary",onClick:h((e=>function(e){e.show=!0,O.tableData[e.type]||(O.tableData[e.type]=[]),O.tableData[e.type].push({id:"",length:0,table:[]})}(l)),["stop"])},{default:v((()=>[n(V,{src:"add",color:"var(--ibg)",height:"var(--fs2)"})])),_:2},1032,["onClick"])],8,_),i(O).tableData[l.type]&&i(O).tableData[l.type].length&&l.show?(o(),s("div",D,[(o(!0),s(u,null,r(i(O).tableData[l.type],((m,V)=>(o(),s("div",{class:"table-content_table",key:"table"+V},[d("div",U,[d("div",C,[a[4]||(a[4]=d("div",{class:"form-label"}," CANID：0x ",-1)),d("div",x,[n(J,{modelValue:m.id,"onUpdate:modelValue":e=>m.id=e,placeholder:"请输入ID"},null,8,["modelValue","onUpdate:modelValue"])]),a[5]||(a[5]=d("div",{class:"form-label"}," 长度(byte)： ",-1)),d("div",N,[n(K,{modelValue:m.length,"onUpdate:modelValue":e=>m.length=e,attrrules:{rexin:"[^0-9]",step:1,min:0,hideunit:!0,hidereplace:!0},ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","ujt"])])]),n(F,{type:"primary",onClick:h((e=>function(e){e.table.push({name:"",type:"Bool",byte:0,bit:0,length:0})}(m)),["stop"])},{default:v((()=>a[6]||(a[6]=[p(" 添加寄存器 ")]))),_:2},1032,["onClick"]),n(F,{type:"danger",onClick:h((e=>function(e,a){O.tableData[e.type].splice(a,1)}(l,V)),["stop"])},{default:v((()=>a[7]||(a[7]=[p(" 删除寄存器 ")]))),_:2},1032,["onClick"])]),(null==m?void 0:m.table)&&(null==m?void 0:m.table.length)?(o(),s(u,{key:0},[d("div",I,[a[8]||(a[8]=y('<div class="table-th" data-v-a1e425ec> 寄存器名称 </div><div class="table-th" data-v-a1e425ec> 寄存器类型 </div><div class="table-th" data-v-a1e425ec> 偏移(byte) </div><div class="table-th" data-v-a1e425ec> 偏移(bit) </div><div class="table-th" data-v-a1e425ec> 长度(bit) </div>',5)),d("div",A,b(i(E).lg("cocommon.operate")),1)]),(o(!0),s(u,null,r(m.table,((a,l)=>(o(),s("div",{class:"table-content_td",key:"td"+l},[d("div",R,[n(J,{modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,placeholder:"请输入文字"},null,8,["modelValue","onUpdate:modelValue"])]),d("div",T,[n(t,{modelValue:a.type,"onUpdate:modelValue":e=>a.type=e,options:e.attrrules[e.keyName].data.registerType,isItem:"",ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","options","ujt"])]),d("div",G,[n(K,{modelValue:a.byte,"onUpdate:modelValue":e=>a.byte=e,attrrules:{rexin:"[^0-9]",step:1,min:0,max:7,hideunit:!0,hidereplace:!0},ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","ujt"])]),d("div",S,[n(K,{modelValue:a.bit,"onUpdate:modelValue":e=>a.bit=e,attrrules:{rexin:"[^0-9]",step:1,min:0,max:7,hideunit:!0,hidereplace:!0},ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","ujt"])]),d("div",$,[n(K,{modelValue:a.length,"onUpdate:modelValue":e=>a.length=e,attrrules:{rexin:"[^0-9]",step:1,min:0,max:32,hideunit:!0,hidereplace:!0},ujt:e.ujt},null,8,["modelValue","onUpdate:modelValue","ujt"])]),d("div",q,[n(F,{type:"danger",onClick:e=>function(e,a){e.table.splice(a,1)}(m,l)},{default:v((()=>[p(b(i(E).lg("cocommon.delete")),1)])),_:2},1032,["onClick"])])])))),128))],64)):c("",!0)])))),128))])):c("",!0)])))),128))]),d("div",B,[d("div",{class:"save-btn",onClick:H},b(i(E).lg("cocommon.save")),1)])])}}}),[["__scopeId","data-v-a1e425ec"]]);export{E as default};
