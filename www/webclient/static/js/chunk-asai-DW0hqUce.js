const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chunk-asai-Ck-2JoDz.js","./chunk-asai-BcUlmSst.js","./entry-asai-C1GKnLJc.js","./chunk-asai-Dt9XmewB.js","../asset/css-asai-CbfgVn_P.css","./chunk-asai-BEbmHGt4.js","../asset/css-asai-CSksSbJg.css","../asset/css-asai-bt90Ypki.css","./chunk-asai-wsKONcAM.js","../asset/css-asai-D__ALcoS.css","./chunk-asai-DrN42U17.js","./chunk-asai-fztcMW1L.js","./chunk-asai-ly7RqWch.js","../asset/css-asai-CCQIxEAh.css","../asset/css-asai-zKSDmhIr.css","./chunk-asai-Do0_1eIA.js","../asset/css-asai-DSxcjZgF.css","./chunk-asai-C_deIwZD.js","../asset/css-asai-BZcobIAD.css"])))=>i.map(i=>d[i]);
import{_ as o}from"./chunk-asai-CY7v6Bo5.js";import{_ as t}from"./chunk-asai-Dt9XmewB.js";import{d as a,c as n,o as e,m as r,a as u,u as l,h as i,I as c,x as s,J as p,r as d,j,w as m,N as f,k as v,F as _}from"./chunk-asai-BcUlmSst.js";const g=a({__name:"RightIndex",props:{ujt:{}},setup(o){const a=o,{$dbwork:i}=a.ujt,c=Object.assign({"./comps/global.vue":()=>t((()=>import("./chunk-asai-Ck-2JoDz.js")),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),"./comps/io.vue":()=>t((()=>import("./chunk-asai-wsKONcAM.js")),__vite__mapDeps([8,1,2,3,4,5,6,9]),import.meta.url),"./comps/move.vue":()=>t((()=>import("./chunk-asai-DrN42U17.js")),__vite__mapDeps([10,11,12,1,2,3,4,5,6,13,14]),import.meta.url),"./comps/plc.vue":()=>t((()=>import("./chunk-asai-Do0_1eIA.js")),__vite__mapDeps([15,1,2,3,4,5,6,16]),import.meta.url),"./comps/project.vue":()=>t((()=>import("./chunk-asai-C_deIwZD.js")),__vite__mapDeps([17,1,2,3,4,5,6,18]),import.meta.url)});function s(o){const t=o.match(/([^\\/]+)(?=\.vue$)/);return t?t[1]:null}for(let t in c)c[s(t)||t]=c[t],delete c[t];return console.log(666.7788,c),(o,t)=>(e(),n(r(u(l(c)[l(i).cocontrol.rightmenu])),{ujt:o.ujt},null,8,["ujt"]))}}),h=a({__name:"index",props:{ujt:{}},setup(t){const a=t,{$fn:r,$global:u,$db:h,$dbwork:k,$model:y}=a.ujt;h.prodata={projectslist:null,taskslist:null,taskcur:null,varspoint:null,varsproject:null,config:{run:{},open:{pty:"lua"}}},k.prodata={itemcur:null,varcur:{},newproject:{},newvar:{},desmenu:{},monacoconfig:null,varsproject:[],saved:{}},k.cocontrol={},h.global={vars:null,io:null,plc:null,setting:null},k.prodata.codety=i((()=>("tree"===u.location.hasharr[2]?"tree"!==h.prodata.config.open.pty&&(h.prodata.config.open.pty="tree"):h.prodata.config.open.pty||(h.prodata.config.open.pty="lua"),h.prodata.config.open.pty))),k.prodata.codepr=i((()=>{var o,t,a;return(null==(o=u.location.query)?void 0:o.id)&&h.prodata.config.open.prid!==(null==(t=u.location.query)?void 0:t.id)&&(h.prodata.config.open.prid=null==(a=u.location.query)?void 0:a.id),h.prodata.config.open.prid})),k.prodata.codetk=i((()=>{var o,t,a;return(null==(o=u.location.query)?void 0:o.tk)&&h.prodata.config.open.tkid!==(null==(t=u.location.query)?void 0:t.tk)&&(h.prodata.config.open.tkid=null==(a=u.location.query)?void 0:a.tk),h.prodata.config.open.tkid})),k.prodata.needsave=i((()=>Object.values(k.prodata.saved).includes(0)));const{initProjectConfig:b,saveProjectConfig:w,initProjects:E}=r.useProjectRead(a.ujt);u.stat.cocontrolproject=0,b().then((o=>{E(k.prodata.codety).then((o=>{r.api.webserver.apiGet("/api/asaijson/manage/select/?path=/webdata/cocontrol/robotview/theme-color.json").then((o=>{if(909==o.code){const t=JSON.parse(o.data);u.config.color=t}u.stat.cocontrolproject=1})).catch((()=>{}))}))})),r.useWs(a.ujt,"cocontrol");const{initIndexWatch:P,offIndexWatch:R}=r.usePublishWs(a.ujt);P();const I=c((()=>h.prodata.config),((o,t)=>{w()}),{deep:!0});function O(o){if(k.prodata.needsave)return o.preventDefault(),o.returnValue="您有未保存的数据，确定要离开吗？","您有未保存的数据，确定要离开吗？"}return s((()=>{window.addEventListener("beforeunload",O)})),p((()=>{window.removeEventListener("beforeunload",O),I&&I(),R(),h.prodata=null,k.prodata=null,k.cocontrol=null,h.global=null})),(t,a)=>{const r=d("RouterView"),i=d("CoControlRobotAreaMain"),c=d("PopBoxConfirm"),s=d("CoControlRobotArea");return e(),j(_,null,[l(y).data.sys.configsys.devlevel?(e(),n(o,{key:0,ujt:t.ujt},null,8,["ujt"])):m("",!0),l(u).stat.cocontrolproject?(e(),n(s,{key:1,ujt:t.ujt},{default:f((()=>[v(i,{ujt:t.ujt},{default:f((()=>[v(r,{ujt:t.ujt,ty:1},null,8,["ujt"])])),right:f((()=>[v(g,{ujt:t.ujt},null,8,["ujt"])])),_:1},8,["ujt"]),v(c,{ujt:t.ujt,id:"poptaskconfirm"},null,8,["ujt"]),v(c,{ujt:t.ujt,id:"popvarconfirm"},null,8,["ujt"]),v(c,{ujt:t.ujt,id:"popcrpconfirm"},null,8,["ujt"])])),_:1},8,["ujt"])):m("",!0)],64)}}});export{h as default};
