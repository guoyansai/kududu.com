import{d as a,e as t,I as s,f as o,r as e,j as l,o as d,F as r,l as p,w as n,E as i,y as c,u as v,k as u,n as m,q as y,s as j,z as k,A as b,h as f,c as g}from"./chunk-asai-BcUlmSst.js";import{_ as w}from"./entry-asai-C1GKnLJc.js";import"./chunk-asai-Dt9XmewB.js";import"./chunk-asai-BEbmHGt4.js";const h={key:0,class:"as-des-main"},x={key:0,class:"as-list"},$={class:"main"},C={class:"litype"},V=["onClick"],_={class:"li"},U={class:"lim"},P=["onUpdate:modelValue"],I={class:"lic"},S=["onClick"],R={key:1,class:"li"},J=w(a({__name:"CodeTasks",props:{ujt:{}},setup(a){const f=a,{$db:g,$dbwork:w,$fn:J,$global:A}=f.ujt,{newTask:O,setTask:T,deleteItem:z}=J.useProjectRead(f.ujt),K=t(2);const N=s((()=>g.prodata.taskslist),((a,t)=>{2===w.prodata.saved.taskslist?w.prodata.saved.taskslist=1:0!==w.prodata.saved.taskslist&&(w.prodata.saved.taskslist=0)}),{deep:!0});return o((()=>{N&&N()})),(a,t)=>{const s=e("AsSvg");return d(),l(r,null,[p("div",{class:m("taskslist"===v(w).prodata.desmenu.project?"as-des-menu-cur":"as-des-menu"),onClick:t[1]||(t[1]=a=>v(w).prodata.desmenu.project="taskslist")},[t[4]||(t[4]=i(" 程序列表 ")),p("div",{class:"as-des-opt",onClick:t[0]||(t[0]=c((a=>v(O)(K.value,1,v(w).prodata.codety)),["stop"]))},[u(s,{color:"var(--ict)",height:"28px",src:"add"})])],2),"taskslist"===v(w).prodata.desmenu.project?(d(),l("div",h,[v(g).prodata.taskslist?(d(),l("div",x,[p("div",$,[p("div",C,[p("div",{onClick:t[2]||(t[2]=c((a=>K.value=2),["stop"])),class:m({curtype:2===K.value})},y(v(A).lang.cocommon.add+v(A).lang.channelcocontrol.tasktypes[2]),3),p("div",{onClick:t[3]||(t[3]=c((a=>K.value=3),["stop"])),class:m({curtype:3===K.value})},y(v(A).lang.cocommon.add+v(A).lang.channelcocontrol.tasktypes[3]),3)]),(d(!0),l(r,null,j(Object.keys(v(g).prodata.taskslist),((a,t)=>(d(),l("div",{onClick:t=>v(T)(a,v(w).prodata.codety),class:m({cur:v(w).prodata.codetk===a})},[p("div",_,y(t+1),1),p("div",U,[k(p("input",{type:"text","onUpdate:modelValue":t=>v(g).prodata.taskslist[a].nm=t},null,8,P),[[b,v(g).prodata.taskslist[a].nm]])]),p("div",I,[p("div",{class:m(`li-type${v(g).prodata.taskslist[a].tk}`)},y(v(A).lang.channelcocontrol.tasktypes[v(g).prodata.taskslist[a].tk]),3)]),t?(d(),l("div",{key:0,class:"li",onClick:c((t=>{!function(a){A.pop.poptaskconfirm.stat=1,A.pop.poptaskconfirm.con=a.con,A.pop.poptaskconfirm.fn=a.fn}({con:v(g).prodata.taskslist[a].nm+" 确认删除吗？",fn:()=>{v(z)(a,v(g).prodata.taskslist)}})}),["stop"])},[u(s,{color:"var(--ch6)",height:"28px",src:"delete"})],8,S)):(d(),l("div",R,"-"))],10,V)))),256))])])):n("",!0)])):n("",!0)],64)}}}),[["__scopeId","data-v-f9b688ea"]]),A={class:"item-main"},O={class:"main-action"},T={class:"no"},z={class:"main-content"},K={class:"content-item"},N={class:"label"},q={class:"content"},B={class:"content-item type"},E={class:"label"},F={class:"content"},G={key:0,class:"content-item pos-values"},L={class:"pos-values-box"},D={class:"label"},H={class:"value"},M=["onUpdate:modelValue"],Q={class:"content-item remark"},W={class:"label"},X={class:"content"},Y={key:0,class:"cell"},Z={class:"content-item"},aa={class:"label"},ta={class:"content"},sa={class:"content-item tool"},oa={class:"label"},ea={class:"content"},la={key:0,class:"item-bottom"},da={class:"action-box"},ra={class:"btn btn-private",role:"button"},pa={class:"btn btn-private",role:"button"},na=a({__name:"PointItem",props:{ujt:{},rowKey:{},index:{},data:{},selected:{type:Boolean}},emits:["row-selected","row-update","row-save","row-remove"],setup(a,{emit:t}){const s=a,{$db:o,$fn:i,$dbwork:g,$global:w}=s.ujt,h=t,x={jp:["J1","J2","J3","J4","J5","J6"],cp:["x","y","z","a","b","c"]},$=f((()=>JSON.parse(s.data.val)));function C(){h("row-selected")}function V(){h("row-update")}function _(){h("row-remove")}return(a,t)=>{const s=e("AsSvg");return d(),l("div",{class:m({"point-item":!0,"is-selected":a.selected}),onClick:C},[p("div",A,[p("div",O,[p("div",T,y(a.index+1),1),p("div",{class:"delete-box",onClick:c(_,["stop"]),role:"button"},[u(s,{color:"var(--ifc)",height:"var(--ifs1)",src:"delete"})])]),p("div",z,[p("div",K,[p("div",N,y(v(i).lg("copoints.table.name")),1),p("div",q,y(a.rowKey),1)]),p("div",B,[p("div",E,y(v(i).lg("copoints.table.type")),1),p("div",F,y("jp"===a.data.postype?v(i).lg("copoints.jointPoint"):v(i).lg("copoints.tcpPoint")),1)]),a.selected?(d(),l("div",G,[p("div",L,[(d(!0),l(r,null,j(x[a.data.postype],((t,s)=>(d(),l("div",{class:"pos-value-box",key:t},[p("div",D,y(t),1),p("div",H,[k(p("input",{type:"number","onUpdate:modelValue":t=>$.value[a.data.postype][s]=t},null,8,M),[[b,$.value[a.data.postype][s]]])])])))),128))])])):n("",!0),p("div",Q,[p("div",W,y(v(i).lg("copoints.table.remark")),1),p("div",X,[a.selected?k((d(),l("textarea",{key:1,"onUpdate:modelValue":t[0]||(t[0]=t=>a.data.nm=t),rows:"2"},null,512)),[[b,a.data.nm]]):(d(),l("div",Y,y(a.data.nm),1))])]),p("div",Z,[p("div",aa,y(v(i).lg("copoints.table.coord")),1),p("div",ta,y($.value.coord),1)]),p("div",sa,[p("div",oa,y(v(i).lg("copoints.table.tool")),1),p("div",ea,y($.value.tool),1)])])]),a.selected?(d(),l("div",la,[p("div",da,[p("div",{class:"btn btn-default",onClick:V,role:"button"},y(v(i).lg("copoints.action.update")),1),p("div",ra,[u(s,{color:"var(--cm4)",height:"var(--fs2)",src:"movl"}),p("span",null,y(v(i).lg("copoints.action.move")),1)]),p("div",pa,[u(s,{color:"var(--cm4)",height:"var(--fs2)",src:"movc"}),p("span",null,y(v(i).lg("copoints.action.move")),1)])])])):n("",!0)],2)}}}),ia={class:"point-list"},ca=w(a({__name:"PointList",props:{ujt:{},varstype:{}},setup(a){const t=a,{$db:s,$fn:o,$dbwork:e}=t.ujt,{deleteItem:p}=o.useProjectRead(t.ujt),{saveVarsSubmit:n}=o.useProjectSave(t.ujt),{setVarCur:i}=o.useProjectVars(t.ujt);return(a,o)=>(d(),l("div",ia,[(d(!0),l(r,null,j(Object.keys(v(s).prodata[a.varstype]||{}),((l,r)=>(d(),g(na,{key:l,ujt:a.ujt,rowKey:l,index:r,data:v(s).prodata[a.varstype][l],selected:l==v(e).prodata.varcur[a.varstype],onRowSelected:t=>v(i)(l,a.varstype,v(e).prodata.codety),onRowUpdate:o=>function(a,s){var o,l,d,r,p,i,c,v,u,m,y,j;const k=s[a],b={coord:(null==(d=null==(l=null==(o=t.ujt.$ws)?void 0:o.cocontrol)?void 0:l.robotstatus)?void 0:d.CoordinateId)||0,tool:(null==(i=null==(p=null==(r=t.ujt.$ws)?void 0:r.cocontrol)?void 0:p.robotstatus)?void 0:i.ToolId)||0},f=(null==(u=null==(v=null==(c=t.ujt.$ws)?void 0:c.cocontrol)?void 0:v.robotposture)?void 0:u.joint)||[0,0,90,0,90,0];if("jp"==k.postype)b.jp=f;else if("cp"==k.postype){const a=(null==(j=null==(y=null==(m=t.ujt.$ws)?void 0:m.cocontrol)?void 0:y.robotposture)?void 0:j.end)||{},s=["x","y","z","a","b","c"].map((t=>a[t]||0));b.cp=s,b.rj=f}k.val=JSON.stringify(b),n(t.varstype,e.prodata.codety)}(l,v(s).prodata[a.varstype]),onRowSave:o[0]||(o[0]=t=>v(n)(a.varstype,v(e).prodata.codety)),onRowRemove:t=>v(p)(l,v(s).prodata[a.varstype])},null,8,["ujt","rowKey","index","data","selected","onRowSelected","onRowUpdate","onRowRemove"])))),128))]))}}),[["__scopeId","data-v-d3d49ad1"]]),va={class:"road-point-wrapper"},ua={class:"point-add-box"},ma=w(a({__name:"Index",props:{ujt:{},varstype:{}},setup(a,{expose:s}){const o=a,{$db:r,$fn:i,$ws:c,$dbwork:j}=o.ujt,{setVarCur:k}=i.useProjectVars(o.ujt),b=t("cp");function f(a){b.value=a}return s({newVars:function(){!function(a,t){var s,o,e,l,d,p,n,i;if("varspoint"===a){r.prodata.projectslist[r.prodata.config.open.prid]&&(void 0===r.prodata.projectslist[r.prodata.config.open.prid].posid?r.prodata.projectslist[r.prodata.config.open.prid].posid=1:r.prodata.projectslist[r.prodata.config.open.prid].posid+=1);const v={coord:(null==(o=null==(s=null==c?void 0:c.cocontrol)?void 0:s.robotstatus)?void 0:o.CoordinateId)||0,tool:(null==(l=null==(e=null==c?void 0:c.cocontrol)?void 0:e.robotstatus)?void 0:l.ToolId)||0},u=(null==(p=null==(d=null==c?void 0:c.cocontrol)?void 0:d.robotposture)?void 0:p.joint)||[0,0,90,0,90,0];if("jp"==t)v.jp=u;else if("cp"==t){const a=(null==(i=null==(n=null==c?void 0:c.cocontrol)?void 0:n.robotposture)?void 0:i.end)||{},t=["x","y","z","a","b","c"].map((t=>a[t]||0));v.cp=t,v.rj=u}j.prodata.newvar[a]={keys:`P${r.prodata.projectslist[r.prodata.config.open.prid].posid}`,postype:t,nm:"位姿",val:JSON.stringify(v)}}}(o.varstype,b.value),r.prodata[o.varstype]||(r.prodata[o.varstype]={}),r.prodata[o.varstype][j.prodata.newvar[o.varstype].keys]={...j.prodata.newvar[o.varstype]},delete r.prodata[o.varstype][j.prodata.newvar[o.varstype].keys].keys,k(j.prodata.newvar[o.varstype].keys,o.varstype,j.prodata.codety)}}),(a,t)=>{const s=e("AsSvg");return d(),l("div",va,[p("div",ua,[p("div",{class:m({"point-add":!0,"is-activing":"cp"==b.value}),role:"button",onClick:t[0]||(t[0]=a=>f("cp"))},["cp"==b.value?(d(),g(s,{key:0,color:"var(--cm8)",height:"var(--fs2)",src:"add"})):n("",!0),p("span",null,y(v(i).lg("copoints.tcpPoint")),1)],2),p("div",{class:m({"point-add":!0,"is-activing":"jp"==b.value}),role:"button",onClick:t[1]||(t[1]=a=>f("jp"))},["jp"==b.value?(d(),g(s,{key:0,color:"var(--cm8)",height:"var(--fs2)",src:"add"})):n("",!0),p("span",null,y(v(i).lg("copoints.jointPoint")),1)],2)]),u(ca,{ujt:a.ujt,varstype:a.varstype},null,8,["ujt","varstype"])])}}}),[["__scopeId","data-v-0dca3f80"]]),ya={key:0,class:"as-des-main"},ja=a({__name:"ProjectPoints",props:{ujt:{},varstype:{}},setup(a){const y=a,{$fn:j,$global:k,$db:b,$dbwork:f}=y.ujt,g=t(),w=s((()=>b.prodata.varspoint),((a,t)=>{2===f.prodata.saved.varspoint?f.prodata.saved.varspoint=1:0!==f.prodata.saved.varspoint&&(f.prodata.saved.varspoint=0)}),{deep:!0}),h=()=>{g.value.newVars()};return o((()=>{w&&w()})),(a,t)=>{const s=e("AsSvg");return d(),l(r,null,[p("div",{class:m(v(f).prodata.desmenu.project===a.varstype?"as-des-menu-cur":"as-des-menu"),onClick:t[0]||(t[0]=t=>v(f).prodata.desmenu.project=a.varstype)},[t[1]||(t[1]=i(" 工程位姿 ")),p("div",{class:"as-des-opt",onClick:c(h,["stop"])},[u(s,{color:"var(--ict)",height:"28px",src:"add"})])],2),v(f).prodata.desmenu.project===a.varstype?(d(),l("div",ya,[u(ma,{ref_key:"compPointsIndex",ref:g,ujt:a.ujt,varstype:a.varstype},null,8,["ujt","varstype"])])):n("",!0)],64)}}}),ka={key:0,class:"as-des-main"},ba={class:"as-list"},fa={class:"main"},ga=["onClick"],wa={class:"as-li-opt"},ha={class:"as-li-opt-li"},xa=["onClick"],$a={class:"as-li-main"},Ca={class:"as-li-main-li"},Va=["onUpdate:modelValue"],_a={class:"as-li-main-li"},Ua=["onUpdate:modelValue"],Pa={class:"as-li-main-li"},Ia=["onUpdate:modelValue"],Sa={class:"as-li-main-li"},Ra={class:"as-li-main-view"},Ja=["onUpdate:modelValue"],Aa=["onUpdate:modelValue"],Oa={class:"as-li-main-li"},Ta=["onUpdate:modelValue"],za=w(a({__name:"ProjectVars",props:{ujt:{},varstype:{}},setup(a){const t=a,{$fn:f,$global:g,$db:w,$dbwork:h}=t.ujt,{setVarCur:x}=f.useProjectVars(t.ujt);const $=s((()=>w.prodata.varsproject),((a,t)=>{var s;if(a){h.prodata.varsproject=Object.entries(a);const t=(null==(s=w.prodata.projectslist[w.prodata.config.open.prid])?void 0:s.varid)?+w.prodata.projectslist[w.prodata.config.open.prid].varid+1:1;w.prodata.projectslist[w.prodata.config.open.prid]={...w.prodata.projectslist[w.prodata.config.open.prid],varid:t},h.prodata.saved.varsproject=2}}),{deep:!0,immediate:!0}),C=s((()=>h.prodata.varsproject),((a,t)=>{2===h.prodata.saved.varsproject?h.prodata.saved.varsproject=1:0!==h.prodata.saved.varsproject&&(h.prodata.saved.varsproject=0)}),{deep:!0});return o((()=>{$&&$(),C&&C()})),(a,t)=>{const s=e("AsSvg");return d(),l(r,null,[p("div",{class:m(v(h).prodata.desmenu.project===a.varstype?"as-des-menu-cur":"as-des-menu"),onClick:t[1]||(t[1]=t=>v(h).prodata.desmenu.project=a.varstype)},[t[2]||(t[2]=i(" 工程变量 ")),p("div",{class:"as-des-opt",onClick:t[0]||(t[0]=c((a=>function(){let a="var"+w.prodata.projectslist[w.prodata.config.open.prid].varid;h.prodata.varsproject.find((t=>t[0]===a))?(g.msg.fn({type:"err",con:a+"已存在！"}),w.prodata.projectslist[w.prodata.config.open.prid].varid++):(h.prodata.varsproject.push([a,{nm:"",val:""}]),g.msg.fn({type:"ok",con:a+"加入列表！"}),w.prodata.projectslist[w.prodata.config.open.prid].varid++)}()),["stop"]))},[u(s,{color:"var(--ict)",height:"28px",src:"add"})])],2),v(h).prodata.desmenu.project===a.varstype?(d(),l("div",ka,[p("div",ba,[p("div",fa,[(d(!0),l(r,null,j(v(h).prodata.varsproject,((o,e)=>(d(),l("div",{class:m({cur:v(h).prodata.varcur[a.varstype]==o[0]||v(h).prodata.varcur[a.varstype+"index"]==e}),onClick:t=>v(x)(o[0],a.varstype,e,v(h).prodata.codety)},[p("div",wa,[p("div",ha,y(e+1),1),p("div",{class:"as-li-opt-li",onClick:c((a=>{!function(a){g.pop.popvarconfirm.stat=1,g.pop.popvarconfirm.con=a.con,g.pop.popvarconfirm.fn=a.fn}({con:(o[1].nm||o[0])+" 确认删除吗？",fn:()=>{!function(a){h.prodata.varsproject.splice(a,1)}(e)}})}),["stop"])},[u(s,{color:"var(--ch6)",height:"28px",src:"delete"})],8,xa)]),p("div",$a,[v(h).prodata.varcur[a.varstype]==o[0]||v(h).prodata.varcur[a.varstype+"index"]==e?(d(),l(r,{key:0},[p("div",Ca,[t[3]||(t[3]=p("div",{class:"as-li-label"},"名称：",-1)),k(p("input",{style:{width:"calc(100% - 110px)"},type:"text","onUpdate:modelValue":a=>o[0]=a},null,8,Va),[[b,o[0]]])]),p("div",_a,[t[4]||(t[4]=p("div",{class:"as-li-label"},"值：",-1)),k(p("textarea",{style:{width:"calc(100% - 110px)",height:"58px"},"onUpdate:modelValue":a=>o[1].val=a},"                                ",8,Ua),[[b,o[1].val]])]),p("div",Pa,[t[5]||(t[5]=p("div",{class:"as-li-label"},"备注：",-1)),k(p("textarea",{style:{width:"calc(100% - 110px)",height:"58px"},"onUpdate:modelValue":a=>o[1].nm=a},"                                ",8,Ia),[[b,o[1].nm]])])],64)):(d(),l(r,{key:1},[p("div",Sa,[t[6]||(t[6]=p("div",{class:"as-li-label"},"名称：",-1)),p("div",Ra,[k(p("input",{style:{width:"88px"},type:"text","onUpdate:modelValue":a=>o[0]=a},null,8,Ja),[[b,o[0]]])]),t[7]||(t[7]=p("div",{class:"as-li-label"},"值：",-1)),k(p("input",{style:{width:"128px"},type:"text","onUpdate:modelValue":a=>o[1].val=a},null,8,Aa),[[b,o[1].val]])]),p("div",Oa,[t[8]||(t[8]=p("div",{class:"as-li-label"},"备注：",-1)),k(p("input",{style:{width:"calc(100% - 110px)"},type:"text","onUpdate:modelValue":a=>o[1].nm=a},null,8,Ta),[[b,o[1].nm]])])],64))])],10,ga)))),256))])])])):n("",!0)],64)}}}),[["__scopeId","data-v-e475d5ed"]]),Ka={key:0,class:"as-des-main"},Na={class:"as-list"},qa={class:"main"},Ba={class:"li"},Ea={class:"lim"},Fa={key:1,class:"li"},Ga=a({__name:"CodeGroup",props:{ujt:{}},setup(a){const t=a,{$model:s,$dbwork:o}=t.ujt;return(a,t)=>v(s).data.sys.configsys.devlevel?(d(),l(r,{key:0},[p("div",{class:m("group"===v(o).prodata.desmenu.project?"as-des-menu-cur":"as-des-menu"),onClick:t[0]||(t[0]=a=>v(o).prodata.desmenu.project="group")}," 模块 ",2),"group"===v(o).prodata.desmenu.project?(d(),l("div",Ka,[p("div",Na,[t[3]||(t[3]=p("div",{class:"tit"},[p("div",{class:"li"},"序号"),p("div",{class:"lim"},"名称"),p("div",{class:"li"},"删除")],-1)),p("div",qa,[(d(),l(r,null,j([1,2,3,4,5,6,7,8,9,10],((a,s)=>p("div",{onClick:t[2]||(t[2]=()=>{}),class:m({cur:v(o).prodata.codepr===a})},[p("div",Ba,y(s+1),1),p("div",Ea,y(a),1),s?(d(),l("div",{key:0,class:"li",onClick:t[1]||(t[1]=c((()=>{}),["stop"]))},"✘")):(d(),l("div",Fa,"-"))],2))),64))])])])):n("",!0)],64)):n("",!0)}}),La={key:0,class:"as-des-area"},Da=a({__name:"project",props:{ujt:{}},setup(a){const t=a,{$db:s,$dbwork:o,$model:e}=t.ujt;return o.prodata.desmenu.project||(o.prodata.desmenu.project="taskslist"),(a,t)=>v(s).prodata?(d(),l("div",La,[u(J,{ujt:a.ujt},null,8,["ujt"]),u(za,{ujt:a.ujt,varstype:"varsproject"},null,8,["ujt"]),u(ja,{ujt:a.ujt,varstype:"varspoint"},null,8,["ujt"]),v(e).data.sys.configsys.devlevel&&"tree"===v(o).prodata.codety?(d(),g(Ga,{key:0,ujt:a.ujt},null,8,["ujt"])):n("",!0)])):n("",!0)}});export{Da as default};
