import{e as t}from"./chunk-asai-BcUlmSst.js";const o={global:!1,project:!1},a=t({}),s=t({});function c(t){const{$fn:c,$global:l}=t,e={off:0,ty:"publish/VarUpdate",db:l.user.info.us,tc:1500,pb:2};return{latestGlobalData:a,latestProjectData:s,startVarUpdate:function(t){const l=!o.global&&!o.project;o[t]=!0,l&&(e.off=0,c.ws.cocontrol.wsWatch(e,(t=>{console.log(t.db,"publish/varUpdate");const o={},c={};Object.keys(t.db).forEach((a=>{if(a.startsWith("gl")){const s=a.slice(11);o[s]=t.db[a]}if(a.startsWith("pr")){const o=a.slice(12);c[o]=t.db[a]}})),a.value=o,s.value=c,console.log(a.value,s.value)})))},closeVarUpdate:function(t){o[t]=!1,o.global||o.project||(e.off=1,c.ws.cocontrol.wsWatchOff(e))}}}export{c as u};
